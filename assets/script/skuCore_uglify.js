"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var nativeBridgeCall=function(e,t,i){try{nativeBridge.call(e,t,i)}catch(e){console.log(e.stack)}};try{window.onerror=function(e,t,i){try{var r="Error: "+e+" Script: "+t+" Line: "+i;return console.log(r),AndroidWebViewEngineInterface.onJsError(r),!0}catch(e){console.log(e.stack)}}}catch(e){console.log(e.stack)}try{window.addEventListener("error",function(e){try{AndroidWebViewEngineInterface.onJsError("addEventListener Error: "+e.toString()),console.log(e.toString())}catch(e){console.log(e.stack)}})}catch(e){console.log(e.stack)}var globalInitialState,skuSuper,isEmpty=function(e){switch(_typeof(e)){case"number":return isNaN(e)?!0:!1;case"string":return 0===e.length||0===e.trim().length?!0:!1;case"boolean":return!1;case"object":if(null!==e)for(var t in e)return!1;return!0;case"function":return!1;default:return!0}},parseNumberWithDefaultZero=function(e){return isNumber(e)?e:(e=parseFloat(e),isNaN(e)?0:e)},isNumberGreaterThan=function(e,t){e=isNumber(e)?e:parseFloat(e),t=isNumber(t)?t:parseFloat(t);return!isNaN(e)&&!isNaN(t)&&t<e},isNumberGreaterAndEquals=function(e,t){return isNumberGreaterThan(e,t)||isNumberEqualsTo(e,t)},isNumberLessThan=function(e,t){e=isNumber(e)?e:parseFloat(e),t=isNumber(t)?t:parseFloat(t);return!isNaN(e)&&!isNaN(t)&&e<t},isNumberLessAndEquals=function(e,t){return isNumberLessThan(e,t)||isNumberEqualsTo(e,t)},isNumberEqualsTo=function(e,t){e=isNumber(e)?e:parseFloat(e),t=isNumber(t)?t:parseFloat(t);return!isNaN(e)&&!isNaN(t)&&e-t<=1e-7},isString=function(e){return"string"==typeof e},isNumber=function(e){return"number"==typeof e},isBoolean=function(e){return"boolean"==typeof e},isFunction=function(e){return"function"==typeof e},isUndefined=function(e){return void 0===e},isNull=function(e){return null===e},isObject=function(e){return!isNull(e)&&"object"===_typeof(e)},isArray=function(e){return"object"===_typeof(e)&&"[object Array]"===Object.prototype.toString.call(e)},isTrue=function(e){return isBoolean(e)?e:isString(e)?"true"===e:!!isNumber(e)&&0!==e},ascendingOrderFunction=function(e,t){return e.split(":")[0]-t.split(":")[0]},ascSortAndAppendPVIdList=function(e){if(isEmpty(e)||!isArray(e))return"";e.sort(ascendingOrderFunction);var i="";return e.forEach(function(e,t){i+=";"+e}),i=isEmpty(i)?i:i.substring(1)},handleBundleItem=function(e,t){var i=t.bundleItem;if(!isEmpty(i)&&!isEmpty(i.bundleSkuMap)&&!(isEmpty(i.currentSkuItem)||isEmpty(i.currentSkuItem.skuBase)||isEmpty(i.currentSkuItem.skuCore))){var r,s=JSON.parse(JSON.stringify(i.bundleSkuMap));for(r in i.bundleSkuMap){var a=i.bundleSkuMap[r]+"";(isEmpty(e.skuCore)||isEmpty(e.skuCore.sku2info)||isEmpty(e.skuCore.sku2info[a])||parseInt(e.skuCore.sku2info[a].quantity)<=0)&&delete s[r]}if(isEmpty(i.currentSkuItem.skuBase.props)||i.currentSkuItem.skuBase.props.forEach(function(e){e.pid+="",e.values.forEach(function(e){e.vid+=""})}),isEmpty(i.currentSkuItem.skuBase.skus)||i.currentSkuItem.skuBase.skus.forEach(function(e){e.skuId+=""}),!isEmpty(i.currentSkuItem.skuCore.sku2info))for(var o in i.currentSkuItem.skuCore.sku2info)i.currentSkuItem.skuCore.sku2info[o].quantity=0;var n,t=i.selectedSkuIds,u=i.currentSkuItem.itemId,t=(isEmpty(t)?dealChildItemSkuQuantity(e,i.bundleSkuMap,i.currentSkuItem):(n=s,t.split("~").forEach(function(e){var t={},i=e.split("."),i=i[0];if(i!=u)for(var r in n)-1<r.indexOf(e)&&(t[r]=n[r]);else t=n;n=t}),dealChildItemSkuQuantity(e,n,i.currentSkuItem)),{});isEmpty(e.skuCore)||isEmpty(e.skuCore.sku2info)||(t=e.skuCore.sku2info[0],isEmpty(t)&&(t={})),e.skuCore=i.currentSkuItem.skuCore,isEmpty(e.skuCore)||isEmpty(e.skuCore.sku2info)||!isEmpty(e.skuCore.sku2info[0])||(e.skuCore.sku2info[0]={quantity:t.quantity}),e.skuBase=i.currentSkuItem.skuBase,isEmpty(e.item)||isEmpty(i.currentSkuItem.itemImages)||isEmpty(i.currentSkuItem.itemImages.images)||(e.item.images=i.currentSkuItem.itemImages.images)}},dealChildItemSkuQuantity=function(e,t,i){var r,s={};for(r in isEmpty(e.skuCore)||isEmpty(e.skuCore.sku2info)||(s=e.skuCore.sku2info),t){var a,o=s[t[r]+""];isEmpty(o)||(a=parseInt(o.quantity),r.split("~").forEach(function(e){var e=e.split("."),t=e[0],e=e[1];t!=i.itemId||isEmpty(e)||isEmpty(i.skuCore.sku2info)||(t=i.skuCore.sku2info[e]).quantity<a&&(t.quantity=a)}))}},bizExecute=function(e){var t=e.originalData,i=e.storedData,r=e.opData,s=e.bizData,a=e.extInput,o=null;isTrue(i.initialized)||(handleBundleItem(t,a),initFramework(e),isEmpty(o)&&(o={originalData:JSON.parse(JSON.stringify(t)),storedData:JSON.parse(JSON.stringify(i)),opData:JSON.parse(JSON.stringify(r)),extInput:JSON.parse(JSON.stringify(a)),baseBizData:JSON.parse(JSON.stringify(s))}),initContext(e,o),i.initialized=!0),isEmpty(o)&&(o={originalData:JSON.parse(JSON.stringify(t)),storedData:JSON.parse(JSON.stringify(i)),opData:JSON.parse(JSON.stringify(r)),extInput:JSON.parse(JSON.stringify(a)),baseBizData:JSON.parse(JSON.stringify(s))}),getDisplayData(e,o),getGlobalData(e)},initFramework=function(e){var t=e.originalData,i=e.storedData,e=e.extInput;initTransparentData(t,i,e),initExecutionOrder(t,i,e),initDescartesMap(t,i)},initContext=function(e,k){e.originalData;var E=e.storedData;E.execution_order.forEach(function(t){if(isEmpty(t))return!(skuSuper=void 0);for(var e=void 0,i=-1,r=void 0,s=-1,a=__targetBizs__.length-1;0<=a;a--)try{var o=__targetBizs__[a](),n=o.getComponentId(k,__targetBizsStoredData__[a]);if(!isEmpty(n)&&n===t){i=a,e=o;break}}catch(e){var u="bizInitContextError: "+t+" -- "+e.stack;console.log(u),nativeBridgeCall("umbrellaAlarm","alarm001",u)}for(var p=__targetSpecialBizs__.length-1;0<=p;p--)try{var c=__targetSpecialBizs__[p](),m=c.getComponentId(k,__targetSpecialBizsStoredData__[p]);if(!isEmpty(m)&&m===t){s=p,isEmpty(e)?e=c:r=c;break}}catch(e){u="bizInitContextError: "+t+" -- "+e.stack;console.log(u),nativeBridgeCall("umbrellaAlarm","alarm001",u)}try{var l,d=void 0,y=void 0,f=(isEmpty(r)?isEmpty(e)||(d=e,y=__targetBizsStoredData__[i]):(skuSuper=e,d=r,y=__targetSpecialBizsStoredData__[s]),d.initContext(k,y),d.saveStoredData(k,y));isEmpty(f)?(E[t]={},k.storedData[t]={}):(l=JSON.parse(JSON.stringify(f)),E[t]=l,k.storedData[t]=f)}catch(e){u="bizInitContextError: "+t+" -- "+e.stack;console.log(u),nativeBridgeCall("umbrellaAlarm","alarm001",u)}skuSuper=void 0})},initExecutionOrder=function(e,t,i){if(isEmpty(t.execution_order)&&(t.execution_order=makeExecutionOrder(),!isEmpty(i.storedData))&&isArray(i.storedData.execution_order)){for(var r=i.storedData.execution_order,s=[],a=0,o=r.length;a<o;a++){var n=r[a];isString(n)&&s.push(n)}t.execution_order=s}},initTransparentData=function(e,t,i){if(t.transparent_map={},!isEmpty(i.storedData)&&!isEmpty(i.storedData.transparent_map)){var r,s=i.storedData.transparent_map,a={};for(r in s)a[r]=s[r];t.transparent_map=a}},initDescartesMap=function(e,n){if(n.pvIdPath2SkuId={},n.skuId2ItemId={},n.descartesMap={},n.outOfStockDescartesMap={},!(isEmpty(e.skuBase)||isEmpty(e.skuBase.skus)||(e.skuBase.skus.forEach(function(e,t){var i=e.propPath.split(";"),i=ascSortAndAppendPVIdList(i),i=(n.pvIdPath2SkuId[i]=e.skuId,e.itemId);isEmpty(i)||(n.skuId2ItemId[e.skuId]=i)}),isEmpty(e.skuCore))||isEmpty(e.skuCore.sku2info))){var t,i=[],r=[];for(t in n.pvIdPath2SkuId){var s=e.skuCore.sku2info[n.pvIdPath2SkuId[t]];isEmpty(s)||(0<parseInt(s.quantity)?i:r).push(t)}i.forEach(function(e,t){for(var i=e.split(";"),r=Math.pow(2,i.length)-1,s=1;s<=r;s++){for(var a="",o=0;o<i.length;o++)0<(s&1<<o)&&(a+=";"+i[o]);0<a.length&&(n.descartesMap[a.substring(1)]=!0)}}),r.forEach(function(e,t){for(var i=e.split(";"),r=Math.pow(2,i.length)-1,s=1;s<=r;s++){for(var a="",o=0;o<i.length;o++)0<(s&1<<o)&&(a+=";"+i[o]);0<a.length&&!n.descartesMap.hasOwnProperty(a.substring(1))&&(n.outOfStockDescartesMap[a.substring(1)]=!0)}})}},getGlobalData=function(e){var t=e.originalData,i=e.storedData,r=e.bizData,e=e.extInput,s=(r.global_data={},{});isEmpty(e.addCartFrom)||(i.addCartFrom=e.addCartFrom),s.addCartFrom=i.addCartFrom,isEmpty(t.item)||(s.itemId=t.item.itemId),isEmpty(i.id_biz_property)||isEmpty(i.id_biz_property.targetItemId)||(s.targetItemId=i.id_biz_property.targetItemId),isEmpty(t.seller)||(s.sellerId=t.seller.userId,s.shopId=t.seller.shopId),isEmpty(i.id_biz_property)||(s.skuId=i.id_biz_property.skuId),isEmpty(e.uniqueId)||(s.uniqueId=e.uniqueId),isEmpty(i.id_biz_head)||isEmpty(i.id_biz_head.selectedTextMap)||(s.propTextList=i.id_biz_head.selectedTextMap.propTextList),s.spm="a2141.7631564.newsku",r.global_data=s},getDisplayData=function(e,v){e.originalData;var _=e.storedData,b=e.bizData,I=e.extInput;_.execution_order.forEach(function(t){if(isEmpty(t))return!(skuSuper=void 0);for(var e=void 0,i=-1,r=void 0,s=-1,a=__targetBizs__.length-1;0<=a;a--)try{var o=__targetBizs__[a](),n=o.getComponentId(v,__targetBizsStoredData__[a]);if(!isEmpty(n)&&n===t){i=a,e=o;break}}catch(e){var u="bizGetDisplayDataError: "+t+" -- "+e.stack;console.log(u),nativeBridgeCall("umbrellaAlarm","alarm001",u)}for(var p=__targetSpecialBizs__.length-1;0<=p;p--)try{var c=__targetSpecialBizs__[p](),m=c.getComponentId(v,__targetSpecialBizsStoredData__[p]);if(!isEmpty(m)&&m===t){s=p,isEmpty(e)?e=c:r=c;break}}catch(e){u="bizGetDisplayDataError: "+t+" -- "+e.stack;console.log(u),nativeBridgeCall("umbrellaAlarm","alarm001",u)}try{var l,d=void 0,y=void 0,f=(isEmpty(r)?isEmpty(e)||(d=e,y=__targetBizsStoredData__[i]):(skuSuper=e,d=r,y=__targetSpecialBizsStoredData__[s]),d.getDisplayData(v,y)),k=isEmpty(I[t])||!isTrue(I[t].gone),E=(isEmpty(t)||isEmpty(f)||!k?console.log(t+": bizDisplayData is empty"):b[t]=f,d.saveStoredData(v,y));isEmpty(E)?(_[t]={},v.storedData[t]={}):(l=JSON.parse(JSON.stringify(E)),_[t]=l,v.storedData[t]=E)}catch(e){u="bizGetDisplayDataError: "+t+" -- "+e.stack;console.log(u),nativeBridgeCall("umbrellaAlarm","alarm001",u)}skuSuper=void 0})},hasSku=function(e,t){return!isEmpty(e.feature)&&isTrue(e.feature.hasSku)},getItemId=function(e){if(!isEmpty(e.item))return e.item.itemId},getSellerId=function(e){if(!isEmpty(e.seller))return e.seller.userId},getSkuModuleColorInfo=function(e,t){return e?t?{titleColor:"#fc511e",borderColor:"#fc511e",backgroundColor:"#FFF9F9",cornerTextColor:"#FFFFFF",cornerBorderColor:"#FFFFFF",cornerBackgroundColor:"#ff5000"}:{titleColor:"#333333",borderColor:"#f5f5f5",backgroundColor:"#f5f5f5",cornerTextColor:"#FFFFFF",cornerBorderColor:"#FFFFFF",cornerBackgroundColor:"#CCCCCC"}:t?{titleColor:"#fda884",borderColor:"#fda884",backgroundColor:"#fffcfc",cornerTextColor:"#FFFFFF",cornerBorderColor:"#FFFFFF",cornerBackgroundColor:"#fda884"}:{titleColor:"#a8a8a8",borderColor:"#f6f6f6",backgroundColor:"#f6f6f6",cornerTextColor:"#FFFFFF",cornerBorderColor:"#FFFFFF",cornerBackgroundColor:"#DDDDDD"}},getBottomBarMode=function(e,t,i){var r="ADDCART_AND_BUYNOW";return r=isEmpty(i.id_biz_bottom)||isEmpty(i.id_biz_bottom.bottomMode)?r:i.id_biz_bottom.bottomMode},executionFirstOrder=["id_biz_first_exe_holder","id_biz_buy_method","id_biz_buy_method_desc","id_biz_property","id_biz_quantity","id_biz_custom_service","id_biz_service","id_biz_installment","id_biz_strategic","id_biz_atmosphere","id_biz_car_model","id_biz_store"],executionNoOrder=["id_biz_relatedAuctions","id_biz_maochao_cpu","id_biz_size_chart","id_biz_area","id_biz_component","id_biz_normal_select"],executionLastOrder=["id_biz_head","id_biz_bottom","id_biz_bottom_tips"],executionOrder=[],synchronizeNativeData=function(e,t){var i=null;try{i=getNativeData(e,t)}catch(e){console.log("getNativeData: "+e.stack)}switch(t){case"string":!isEmpty(i)&&isArray(i)||(i="");break;case"array":!isEmpty(i)&&isArray(i)||(i=[]);break;default:!isEmpty(i)&&isObject(i)||(i={})}return i},makeInputParamsCorrect=function(e){var t={originalData:{},storedData:{},extInput:{},opData:{},platform:"",bizData:{}};if(!isEmpty(e)){if(isEmpty(e.storedState)||(isEmpty(e.storedState.initialState)||(globalInitialState=e.storedState.initialState,console.log("initialState use input")),t.originalData=globalInitialState,t.extInput=e.storedState.extInput,t.storedData=e.storedState,__targetBizsStoredData__=e.storedState.bizsStoredData,isEmpty(__targetBizsStoredData__)&&(__targetBizsStoredData__=[]),__targetSpecialBizsStoredData__=e.storedState.bizsSpecialStoredData,isEmpty(__targetSpecialBizsStoredData__)&&(__targetSpecialBizsStoredData__=[])),isEmpty(e.opState)||(t.opData=e.opState),isEmpty(e.platform)||(t.platform=e.platform),isEmpty(t.originalData)&&(globalInitialState=synchronizeNativeData("originalData","object"),t.originalData=globalInitialState,console.log("synchronizeNativeData originalData")),isEmpty(t.storedData)&&(t.storedData={}),isEmpty(t.extInput)&&(t.extInput={}),isEmpty(t.opData)&&(t.opData={}),isEmpty(t.platform)&&(t.platform=synchronizeNativeData("platform","string")),isEmpty(t.bizData)&&(t.bizData={}),__targetBizsStoredData__.length!==__targetBizs__.length)for(var i=0,r=__targetBizs__.length-__targetBizsStoredData__.length;i<r;i++)__targetBizsStoredData__.push({});if(__targetSpecialBizsStoredData__.length!==__targetSpecialBizs__.length)for(i=0,r=__targetSpecialBizs__.length-__targetSpecialBizsStoredData__.length;i<r;i++)__targetSpecialBizsStoredData__.push({})}return t},makeOutputParamsCorrect=function(e){var t={storedState:{},bizState:{}};return isEmpty(e)||(isEmpty(e.storedData)||(t.storedState=e.storedData),isEmpty(e.bizData)||(t.bizState=e.bizData),isEmpty(t.storedState)&&(t.storedState={}),isEmpty(t.bizState)&&(t.bizState={}),isEmpty(__targetBizsStoredData__)||(t.storedState.bizsStoredData=__targetBizsStoredData__),isEmpty(__targetSpecialBizsStoredData__))||(t.storedState.bizsSpecialStoredData=__targetSpecialBizsStoredData__),t},makeExecutionOrder=function(){executionOrder=[];for(var e={originalData:{},storedData:{},opData:{},extInput:{},baseBizData:{}},t=0,i=__targetSpecialBizs__.length;t<i;t++){var r="unknownBizId";try{var s,r=__targetSpecialBizs__[t]().getComponentId(e,__targetSpecialBizsStoredData__[t]);isEmpty(r)||!isString(r)||(s=!1,executionFirstOrder.forEach(function(e){r===e&&(s=!0)}),executionLastOrder.forEach(function(e){r===e&&(s=!0)}),executionNoOrder.forEach(function(e){r===e&&(s=!0)}),s)||executionNoOrder.push(r)}catch(e){var a="makeExecutionOrderError: "+r+" -- "+e.stack;console.log(a),nativeBridgeCall("umbrellaAlarm","alarm001",a)}}return executionFirstOrder.forEach(function(e){executionOrder.push(e)}),executionNoOrder.forEach(function(e){executionOrder.push(e)}),executionLastOrder.forEach(function(e){executionOrder.push(e)}),executionOrder},main=function(t){var t=isString(t)?JSON.parse(t):t,t=makeInputParamsCorrect(t),e=(bizExecute(t),makeOutputParamsCorrect(t)),i=JSON.stringify({method:"main",methodReturn:e});if("AndroidOld"!==t.platform)return"Android"===t.platform?i:e;try{AndroidWebViewEngineInterface.onReceiveValue(i)}catch(e){t="AndroidOld return error: "+e.stack;console.log(t),nativeBridgeCall("umbrellaAlarm","alarm001",t)}},__targetBizsStoredData__=[],__targetBizs__=[function(){function e(e,t){var i,r;null==e||isEmpty(e.originalData)||(i=!1,r="",isEmpty(e.originalData.skuCore)||isEmpty(e.originalData.skuCore.skuItem)||isEmpty(e.originalData.skuCore.skuItem.skuH5Url)||(i=!0,r=e.originalData.skuCore.skuItem.skuH5Url),s.downgrade=i,s.url=r,i=!1,r="",isEmpty(e.originalData.skuCore)||isEmpty(e.originalData.skuCore.skuItem)||isEmpty(e.originalData.skuCore.skuItem.optionalSkuH5Url)||(i=!0,r=e.originalData.skuCore.skuItem.optionalSkuH5Url),s.optionalDowngrade=i,s.optionalUrl=r)}function t(e,t){return s}function i(e,t){return function(e,t){e=e.storedData[a(e,t)];isEmpty(e)||(s=e||{downgrade:!1,url:"",optionalDowngrade:!1,optionalUrl:""})}(e,t),r(e.opData),{h5_sku:s}}function r(e){"page_update"!==e.type||isEmpty(e.eventData)||console.log("params: "+JSON.stringify(e.eventData))}var s={downgrade:!1,url:"",optionalDowngrade:!1,optionalUrl:""},a=function(e,t){return"id_biz_first_exe_holder"};return function(){return{initContext:e,getComponentId:a,saveStoredData:t,getDisplayData:i}}}(),function(){function e(e,t){!function(e,t){if(c={method:"normal"},!isEmpty(e.feature)&&isTrue(e.feature.creditBuy)){var i=[];isEmpty(e.skuCore)||isEmpty(e.skuCore.skuBuy)||isEmpty(e.skuCore.skuBuy.buyPattern)||isEmpty(e.skuCore.skuBuy.buyPattern.type)||(i=e.skuCore.skuBuy.buyPattern.type);for(var r=0,s=(i=isEmpty(e.skuCore)||isEmpty(e.skuCore.skuBuy)||isEmpty(e.skuCore.skuBuy.skuPattern)||isEmpty(e.skuCore.skuBuy.skuPattern.type)?i:e.skuCore.skuBuy.skuPattern.type).length;r<s;r++){var a=i[r];if(isTrue(a.selected)){c.method=a.bizId;break}}isEmpty(t.id_biz_buy_method)||isEmpty(t.id_biz_buy_method.bizId)||"xyhf"!==t.id_biz_buy_method.bizId||(c.method="xyhf")}}(e.originalData,e.extInput)}function t(e,t){return c}function i(e,t){var i;return function(e,t){e=e.storedData[r(e,t)];isEmpty(e)||(c=e||{method:"normal"})}(e,t),t=e.originalData,m(t,i=e.storedData,e.extInput)||s(t,i)||(c.method="normal"),"change_buy_types"!==(t=e.opData).type||isEmpty(t.extraParams)||!isArray(t.extraParams)||(t=t.extraParams[0],isEmpty(t.bizId))||(c.method=t.bizId),function(e,t,i){var r={};if(!isEmpty(e.feature)&&isTrue(e.feature.creditBuy)&&m(e,t,i)){var t="",s=[];if(isEmpty(e.skuCore)||isEmpty(e.skuCore.skuBuy)||isEmpty(e.skuCore.skuBuy.buyPattern)||isEmpty(e.skuCore.skuBuy.buyPattern.type)||(t=e.skuCore.skuBuy.buyPattern.title,s=e.skuCore.skuBuy.buyPattern.type),isEmpty(e.skuCore)||isEmpty(e.skuCore.skuBuy)||isEmpty(e.skuCore.skuBuy.skuPattern)||isEmpty(e.skuCore.skuBuy.skuPattern.type)||(t=e.skuCore.skuBuy.skuPattern.title,s=e.skuCore.skuBuy.skuPattern.type),!isEmpty(s)){for(var a=[],o=0,n=s.length;o<n;o++){var u=s[o],p={},p=c.method===u.bizId?{title:u.desc,titleColor:"#fc511e",borderColor:"#fc511e",backgroundColor:"#FFF9F9",bizId:u.bizId}:{title:u.desc,titleColor:"#333333",borderColor:"#f5f5f5",backgroundColor:"#f5f5f5",bizId:u.bizId};isEmpty(u.badgeDesc)||(p.cornerText=u.badgeDesc,p.cornerTextColor="#FFFFFF",p.cornerBorderColor="#FFFFFF",p.cornerBackgroundColor="#ff5000"),a.push(p)}isEmpty(a)||(r.title=t,r.value=a)}}return r}(e.originalData,e.storedData,e.extInput)}var c={method:"normal"},r=function(e,t){return"id_biz_buy_method"},m=function(e,t,i){return"BUYNOW"===getBottomBarMode(e,t,i)||!isEmpty(e.skuCore)&&!isEmpty(e.skuCore.skuBuy)&&!isEmpty(e.skuCore.skuBuy.buyPattern)&&isTrue(e.skuCore.skuBuy.buyPattern.cartEnableBuyPattern)},s=function(e,t){return!!isEmpty(c.method)||"normal"===c.method};return function(){return{initContext:e,getComponentId:r,saveStoredData:t,getDisplayData:i}}}(),function(){function e(e,t){}function t(e,t){return"id_biz_buy_method_desc"}function i(e,t){return{}}function r(e,t){var i=e.originalData,r=e.storedData,e=e.extInput;if("BUYNOW"===getBottomBarMode(s=i,r,e)||!(isEmpty(s.skuCore)||isEmpty(s.skuCore.skuBuy)||isEmpty(s.skuCore.skuBuy.buyPattern))&&isTrue(s.skuCore.skuBuy.buyPattern.cartEnableBuyPattern)){var s,a=function(e,t){var i=t.id_biz_buy_method;if(!isEmpty(i)){var r=[];isEmpty(e.skuCore)||isEmpty(e.skuCore.skuBuy)||isEmpty(e.skuCore.skuBuy.buyPattern)||isEmpty(e.skuCore.skuBuy.buyPattern.type)||(r=e.skuCore.skuBuy.buyPattern.type);for(var s=0,a=(r=isEmpty(e.skuCore)||isEmpty(e.skuCore.skuBuy)||isEmpty(e.skuCore.skuBuy.skuPattern)||isEmpty(e.skuCore.skuBuy.skuPattern.type)?r:e.skuCore.skuBuy.skuPattern.type).length;s<a;s++){var o=r[s];if(i.method===o.bizId)return o}}return{}}(i,r);if(!isEmpty(a)&&!isEmpty(a.introduce))switch(a.bizId){case"xyhf":return{buy_types_desc_credit:{image:a.introduce.icon,tips:a.introduce.name,descRichText:a.introduce.richTextDesc,link:a.introduce.linkUrl,rightTextColor:"#FF5000"}};case"tmcreditbuy":return{buy_types_desc_credit:{image:a.introduce.icon,tips:a.introduce.name,desc:a.introduce.writing,link:a.introduce.linkUrl,rightTextColor:"#999999"}};case"ziti":return{buy_types_desc_shop:{title:"选择提货门店(请在购买后 30 天内到店取货)",image:a.introduce.icon,tips:a.introduce.name,desc:a.introduce.writing,link:a.introduce.linkUrl}}}}return{}}return function(){return{initContext:e,getComponentId:t,saveStoredData:i,getDisplayData:r}}}(),function(){function e(e,t){!function(e,t,i){if(m="0",d={},l="",_=v=!(f=[]),!isEmpty(e.skuBase)&&!isEmpty(e.skuBase.skus)){var r="";isEmpty(i.id_biz_property)||(r=i.id_biz_property.skuId);for(var s=0,a=e.skuBase.skus.length;s<a;s++){var o=e.skuBase.skus[s];if(isTrue(o.selected)&&!isEmpty(o.skuId)&&!isEmpty(o.propPath)&&E(e,t,o.skuId))break}E(e,t,r),isEmpty(e.skuBase)||isEmpty(e.skuBase.props)||(e.skuBase.props.forEach(function(e,t){var i=e.pid;!isEmpty(e.values)&&isArray(e.values)&&1===e.values.length&&(e=e.values[0].vid,d[i]=e)}),isEmpty(i.id_biz_property))||isEmpty(i.id_biz_property.checkedPVs)||!isString(i.id_biz_property.checkedPVs)||I(e,t,{type:"check_prop_value",eventData:{checkedPVs:i.id_biz_property.checkedPVs}})}}(e.originalData,e.storedData,e.extInput),k(e.originalData,e.storedData),i(e.originalData)}function t(e,t){var i={skuId:m,bigImageMode:v,checkedPropValue:d,unCheckedPropNames:f,targetItemId:l,isPropHasImage:_};return isEmpty(y)||(i.macValueInfo=y),i}function i(e,t){if(!isEmpty(e.feature)&&isTrue(e.feature.bigImageSkuProp)&&!isEmpty(e.skuBase)&&!isEmpty(e.skuBase.props))for(var i=0,r=e.skuBase.props.length;i<r;i++){var s=e.skuBase.props[i];if(!isEmpty(s)&&!isEmpty(s.values)&&isArray(s.values)&&0<s.values.length){for(var a=!0,o=0,n=s.values.length;o<n;o++){var u=s.values[o];isEmpty(u)||isEmpty(u.image)?a&=!1:a&=!0}if(a){v=a;break}}}}function r(e,t){var i,r,s,a,o,n=e.originalData,u=!isEmpty(n.skuBase)&&!isEmpty(n.skuBase.propAddedInfo),p=(u&&(i=e.storedData[b(e,t)],isEmpty(i)||(i.bigImageMode=!1)),!function(e,t){e=e.storedData[b(e,t)];isEmpty(e)||(m=e.skuId||"0",d=e.checkedPropValue||{},f=e.unCheckedPropNames||[],v=e.bigImageMode||!1,l=e.targetItemId||"",_=e.isPropHasImage||!1)}(e,t),i=e.originalData,t=e.storedData,"change_prop"===(a=e.opData).type&&!isEmpty(a.extraParams)&&isArray(a.extraParams)&&(a=a.extraParams[0],isTrue(a.canSelect))&&(isTrue(a.isSkuId)?E(i,t,a.pvId):(s=(r=a.pvId.split(":"))[0],!a.selected?d[s]=r[1]:d.hasOwnProperty(s)&&delete d[s],k(i,t))),I(a=e.originalData,r=e.storedData,e.opData)&&k(a,r),"prop_bigImg_switch"!==(s=e.opData).type||isEmpty(s.eventData)||(v=!s.eventData.isBigMode),t=e.storedData,a=e.extInput,isEmpty((p=e.originalData).skuBase)||isEmpty(p.skuBase.props)?{}:S(p,t,a));return isEmpty(p)||(isEmpty(p.sku_property)?p.show_property={}:p.show_property={showComponent:!0}),c(n,p),u?function(e,t,i,r){if(isEmpty(e.skuBase)||isEmpty(e.skuBase.props))return{};if(isEmpty(i))return{};"change_prop"==r.type&&!isEmpty(r.extraParams)&&isArray(r.extraParams)&&(r=r.extraParams[0],isTrue(r.macVidChanged))&&(y=r);var s=i.sku_property;if(isEmpty(s))return{};var a,o,n,u=e.skuBase.propAddedInfo,p=e.skuBase.macWeexUrl;for(n in u){var c=n,m=u[n],l=parseInt(m.macShowNum),d=m.macShowText;s.forEach(function(e,t){var i,r;e.pid===n&&((o=e.value).forEach(function(e,t){l<=t&&(isEmpty(y)?isTrue(e.selected)&&(y=i=e):e.pvId===y.pvId&&(i=e)),isTrue(e.selected)&&(t=e.pvId.split(":"),a=t[1])}),r=e.value.slice(0,l),(r=isEmpty(i)?r:[i].concat(r)).push({title:d,pvId:"",titleColor:"#333333",borderColor:"#f5f5f5",borderType:"normal",backgroundColor:"#f5f5f5",notExist:!1,canSelect:!0,selected:!1,url:p}),e.value=r)})}return{sku_property:s,MACUrl:p,pid:c,show_property:i.show_property,vPropertyList:o,macSKUInfos:{selectedVid:a,list:D(e,t,c)}}}(n,e.storedData,p,e.opData):(t=e.originalData,o=[],isEmpty(t.skuCore)||isEmpty(t.skuCore.abSwitch)||!isTrue(t.skuCore.abSwitch.enableShowPic)||isEmpty(t.skuBase)||isEmpty(t.skuBase.props)||t.skuBase.props.forEach(function(e,t){var i=e.pid;isEmpty(d[i])&&o.push(e.name)}),f=o,p)}function c(e,t){isEmpty(e)||isEmpty(t)||isEmpty(e.feature)||isEmpty(e.feature.oneProductMM)||!isTrue(e.feature.oneProductMM)||isEmpty(e.skuBase)||isEmpty(e.skuBase.skus||!isArray(e.skuBase.skus))||1!=e.skuBase.skus.length||isEmpty(m)||"0"===m||(t.show_property={})}var y,m="0",l="",s="",d={},f=[],v=!1,_=!1,k=function(e,t){var i,r;!isEmpty(e.skuBase)&&!isEmpty(e.skuBase.props)&&(r=Object.keys(d),e.skuBase.props.length===r.length)?(r.sort(ascendingOrderFunction),i="",r.forEach(function(e,t){i+=";"+e+":"+d[e]}),isEmpty(i)||(i=i.substring(1)),e=t.pvIdPath2SkuId[i],isEmpty(e)||(m=e),r=t.skuId2ItemId[m],isEmpty(r)||(l=r,s=i)):m="0"},E=function(e,t,i){for(var r=0,s=e.skuBase.skus.length;r<s;r++){var a=e.skuBase.skus[r];if(!isEmpty(a.skuId)&&a.skuId===i&&!isEmpty(a.propPath)){var o=a.propPath.split(";"),n=ascSortAndAppendPVIdList(o);if(isEmpty(n))return!1;if(!0===t.descartesMap[n]||!0===t.outOfStockDescartesMap[n])return o.forEach(function(e,t){e=e.split(":");d[e[0]]=e[1]}),m=a.skuId,!0}}return!1},b=function(e,t){return"id_biz_property"},I=function(e,t,i){if("check_prop_value"!==i.type)return!1;if(isEmpty(i.eventData))return!1;if(isEmpty(i.eventData.checkedSkuId)||E(e,t,i.eventData.checkedSkuId)&&(s=!0),!isEmpty(i.eventData.checkedPVs))for(var r=i.eventData.checkedPVs.split(";"),s=!1,a=0,o=r.length;a<o;a++){var n,u,p=r[a];isEmpty(p)||(u=p.split(":"),!isEmpty(u)&&2<=u.length&&(n=u[0],u=u[1],C(e,t,p))&&(d[n]=u,s=!0))}return s},C=function(e,t,i){if(isEmpty(i)||isEmpty(t.descartesMap))return!1;var r,s=[],a=i.split(":")[0];for(r in d)a!==r&&s.push(r+":"+d[r]);s.push(i);i=ascSortAndAppendPVIdList(s);return!isEmpty(i)&&!0===t.descartesMap[i]},o=function(e,t,i){if(isEmpty(i)||isEmpty(t.outOfStockDescartesMap))return!1;var r,s=[],a=i.split(":")[0];for(r in d)a!==r&&s.push(r+":"+d[r]);s.push(i);i=ascSortAndAppendPVIdList(s);return!isEmpty(i)&&!0===t.outOfStockDescartesMap[i]},a=function(r,s){var a={};return isEmpty(r.skuBase)||isEmpty(r.skuBase.props)||r.skuBase.props.forEach(function(e,t){var i=e.pid;isEmpty(e.values)||e.values.forEach(function(e,t){e=i+":"+e.vid;C(r,s,e)||o(r,s,e)||(a[e]=!0)})}),a},h=function(e,t){return!(isEmpty(d)||isEmpty(t)||t.split(":").length<2)&&(t=t.split(":"),d[t[0]]===t[1])},g=function(e,t,i,r){var s,a;return isEmpty(e)||isEmpty(t)||isEmpty(i)||(i=t.pvIdPath2SkuId[i],isEmpty(i))||isEmpty(e.skuCore)||isEmpty(e.skuCore.sku2info)||(s="",a=e.skuCore.sku2info,"ADDCART"!=getBottomBarMode(e,t,r)||isEmpty(a[i])||isEmpty(a[i].cart)||isEmpty(a[i].cart.subPrice)||(s=a[i].cart.subPrice.priceText),!isEmpty(s)||isEmpty(a[i])||isEmpty(a[i].subPrice)||(s=a[i].subPrice.priceText),!isEmpty(s)||isEmpty(a[i])||isEmpty(a[i].price)||(s=a[i].price.priceText),isEmpty(s))?"":"￥"+s},S=function(l,d,y){var f,k,E=[];return isEmpty(l.skuBase)||isEmpty(l.skuBase.props)?{sku_property:E}:(f=1===l.skuBase.props.length,isEmpty(l.feature)?f=!1:f&=isTrue(l.feature.skuPropPrice),k=a(l,d),l.skuBase.props.forEach(function(e,t){var r=e.pid,i=isString(e.name)?e.name:"",s=[],a=!1,o=[],n=!1,u=!1;if(!isEmpty(e.values)){if(v)for(var p=0,c=e.values.length;p<c;p++){var m=e.values[p];if(!isEmpty(m)&&!isEmpty(m.image)){a=!0;break}}for(p=0,c=e.values.length;p<c;p++){m=e.values[p];if(!isEmpty(m)&&!isEmpty(m.image)){_=n=!0,i=i+"("+e.values.length+")";break}}!n||isEmpty(l.feature)||isEmpty(l.feature.skuNewBigImg)||(u=isTrue(l.feature.skuNewBigImg)),e.values.forEach(function(e,t){var i={title:isString(e.name)?e.name:"",pvId:r+":"+e.vid};isEmpty(e.cornerText)||(i.cornerText=e.cornerText,i.cornerTextColor="#FFFFFF",i.cornerBorderColor="#FFFFFF",i.cornerBackgroundColor="#ff5000"),h(l,i.pvId)?(C(l,d,i.pvId)?(i.titleColor="#fc511e",i.borderColor="#fc511e",i.borderType="normal",i.backgroundColor="#FFF9F9"):(i.titleColor="#fc511e",i.borderColor="#fc511e",i.borderType="normal",i.backgroundColor="#FFF9F9",i.cornerText="缺货",i.cornerTextColor="#FFFFFF",i.cornerBorderColor="#FFFFFF",i.cornerBackgroundColor="#ff5000"),i.notExist=!1,i.canSelect=!0,i.selected=!0,f&&(i.priceColor="#fc511e")):k[i.pvId]?(i.titleColor="#a8a8a8",i.borderColor="#ffffff",i.borderType="normal",i.backgroundColor="#f6f6f6",i.notExist=!0,i.canSelect=!1,i.selected=!1,f&&(i.priceColor="#a8a8a8")):(C(l,d,i.pvId)?(i.titleColor="#333333",i.borderColor="#ffffff",i.borderType="normal",i.backgroundColor="#f5f5f5"):(i.titleColor="#333333",i.borderColor="#ffffff",i.borderType="normal",i.backgroundColor="#f5f5f5",i.cornerText="缺货",i.cornerTextColor="#FFFFFF",i.cornerBorderColor="#FFFFFF",i.cornerBackgroundColor="#cccccc"),i.notExist=!1,i.canSelect=!0,i.selected=!1,f&&(i.priceColor="#999999")),isEmpty(e.image)?i.icon="":i.icon=e.image,f&&(i.price=g(l,d,r+":"+e.vid,y)),(a?(t%6==0&&(isEmpty(o)||(o=[]),s.push(o)),o):s).push(i)})}isEmpty(s)||E.push({title:i,isBlock:a,propCanSwitch:u,viewId:"property_"+t,pid:r,value:s})}),{sku_property:E,pvStr:s,isBigMode:v,showPropPrice:f})},D=function(i,r,s){var a=-1,e=i.skuBase.props;return e.forEach(function(e,t){e.pid===s&&(a=t)}),-1==a?[]:((e=e[a].values).forEach(function(e){var t=s+":"+e.vid;e.checkable=C(i,r,t)}),e)};return function(){return{initContext:e,getComponentId:b,saveStoredData:t,getDisplayData:r}}}(),function(){function e(e,t){o(e.originalData,e.storedData),n(e,t),u(e,t)}function t(e,t){return{quantity:E}}function i(e,t){var i,r,s,a;return function(e,t){e=e.storedData[p(e,t)];isEmpty(e)||(E=e.quantity||{})}(e,t),c(e.extInput),function(e){if("increase_num"===e.type&&!isEmpty(e.eventData)){var t=parseInt(e.eventData.selBuy),i=parseInt(e.eventData.upperLimit),r=parseInt(e.eventData.unitBuy),e=isTrue(e.eventData.unlimited);if(!isNaN(t)&&!isNaN(i)){if(e)t+=r;else{if(i<t)return;t+r<=i&&(t+=r)}E.currentNum=t+""}}}(e.opData),function(e){if("decrease_num"===e.type&&!isEmpty(e.eventData)){var t=parseInt(e.eventData.selBuy),i=parseInt(e.eventData.lowerLimit),r=parseInt(e.eventData.unitBuy),e=isTrue(e.eventData.unlimited);if(!isNaN(t)&&!isNaN(i)){if(e)t-=r;else{if(t<i)return;i<=t-r&&(t-=r)}E.currentNum=t+""}}}(e.opData),"input_num"!==(a=e.opData).type||isEmpty(a.extraParams)||(i=a.extraParams[0],isTrue(i.singleLine)?isEmpty(a.userInput)||a.userInput.length<=0||(a=parseInt(a.userInput[0]),r=parseInt(E.lowerLimit),s=parseInt(E.upperLimit),r<=a&&a<=s&&(E.currentNum=a+"")):(r=parseInt(i.number),!isEmpty(r)&&0<r&&(E.currentNum=r+""))),s=e,(a=t).buyMethod!==s.storedData.id_biz_buy_method.method&&(n(s,a),o(s.originalData,s.storedData),c(s.extInput)),a.skuId!==s.storedData.id_biz_property.skuId&&(u(s,a),o(s.originalData,s.storedData),c(s.extInput)),function(e,t,i){var r=I(e,t),s=E.unit,a=E.currentNum,o=v(e,t),n=b(e,t),u=parseInt(a)>=parseInt(E.upperLimit)||parseInt(a)+parseInt(s)>parseInt(E.upperLimit)?"false":"true",p=parseInt(a)<=parseInt(E.lowerLimit)||parseInt(a)-parseInt(s)<parseInt(E.lowerLimit)?"false":"true",c={},m="INCREASE";if(!isTrue(u)&&C(e,t)&&n<o&&(u="true",m="INCREASE_MTOP"),isEmpty(e.feature)||!isTrue(e.feature.isDonateItem)||isEmpty(e.item)||isEmpty(e.item.countMultiple)){var l={skuId:t.id_biz_property.skuId,currentNum:a,unitStep:s,type:"increase"},d=h(e,t);if(!isEmpty(d))for(var y in d)l[y]=d[y];c={title:"购买数量",upperLimit:E.upperLimit,lowerLimit:E.lowerLimit,limitBuy:r,unitBuy:s,selBuy:a,enableIncrease:u,enableDecrease:p,decreaseName:"DECREASE",decreaseMtopParams:JSON.stringify({}),increaseName:m,increaseMtopParams:JSON.stringify(l),normal:{current:!0}}}else{var f=[],k=!1;e.item.countMultiple.forEach(function(e,t){parseInt(E.currentNum)===parseInt(e.value)?(k=!0,f.push({title:e.name,titleColor:"#fc511e",borderColor:"#fc511e",backgroundColor:"#FFF9F9",number:e.value,singleLine:!1})):f.push({title:e.name,titleColor:"#333333",borderColor:"#ffffff",backgroundColor:"#f5f5f5",number:e.value,singleLine:!1})}),f.push(k?{title:"",inputPrefix:"其他",inputSuffix:"元",titleColor:"#333333",borderColor:"#ffffff",backgroundColor:"#f5f5f5",number:"",singleLine:!0}:{title:E.currentNum,inputPrefix:"其他",inputSuffix:"元",titleColor:"#fc511e",borderColor:"#fc511e",backgroundColor:"#FFF9F9",number:E.currentNum,singleLine:!0}),c={title:"捐赠金额",value:f,upperLimit:E.upperLimit,lowerLimit:E.lowerLimit,unitBuy:s,donate:{current:!0,limitTips:_(e,t,i)}}}return c}(e.originalData,e.storedData,e.opData)}var E={},s=function(e,t){var i=t.id_biz_buy_method;if(!isEmpty(i)){var r=[];isEmpty(e.skuCore)||isEmpty(e.skuCore.skuBuy)||isEmpty(e.skuCore.skuBuy.buyPattern)||isEmpty(e.skuCore.skuBuy.buyPattern.type)||(r=e.skuCore.skuBuy.buyPattern.type);for(var s=0,a=(r=isEmpty(e.skuCore)||isEmpty(e.skuCore.skuBuy)||isEmpty(e.skuCore.skuBuy.skuPattern)||isEmpty(e.skuCore.skuBuy.skuPattern.type)?r:e.skuCore.skuBuy.skuPattern.type).length;s<a;s++){var o=r[s];if(i.method===o.bizId)return o}}return{}},v=function(e,t){var i=Number.MAX_VALUE,r=(isEmpty(e.skuCore)||isEmpty(e.skuCore.sku2info)||isEmpty(e.skuCore.sku2info[t.id_biz_property.skuId])||(r=parseInt(e.skuCore.sku2info[t.id_biz_property.skuId].limit),isEmpty(r))||(i=r),isEmpty(e.feature)||!isTrue(e.feature.isDonateItem)||isEmpty(e.item)||(r=parseInt(e.item.maxDonateCount),!isEmpty(r)&&0<r&&(i=r)),s(e,t));return i=isEmpty(r)||(e=parseInt(r.limit),isEmpty(e))?i:Math.min(i,e)},o=function(e,t){E={};var i=Math.min(b(e,t),v(e,t)),t=m(e,t),r=t,s=Math.min(t,i);isEmpty(e.feature)||!isTrue(e.feature.isDonateItem)||isEmpty(e.item)||isEmpty(e.item.countMultiple)||(e=e.item.countMultiple[0],!isEmpty(e)&&0<parseInt(e.value)&&(s=parseInt(e.value))),E={currentNum:s+"",unit:t+"",upperLimit:i+"",lowerLimit:r+""}},n=function(e,t){t.buyMethod=e.storedData.id_biz_buy_method.method},u=function(e,t){t.skuId=e.storedData.id_biz_property.skuId},p=function(e,t){return"id_biz_quantity"},c=function(e){var t,i,e=parseInt(e.quantity);isEmpty(e)||(i=parseInt(E.unit),t=parseInt(E.upperLimit),e%i==0&&(i=Math.min(Math.max(i,e),t),E.currentNum=i+""))},_=function(e,t,i){if("input_num"===i.type&&!isEmpty(i.extraParams)){var r=i.extraParams[0];if(isTrue(r.singleLine)){if(isEmpty(i.userInput)||i.userInput.length<=0)return"";var r=parseInt(i.userInput[0]),i=parseInt(E.lowerLimit),s=parseInt(E.upperLimit);if(r<i)return"单笔最小捐赠金额为"+i+"元";if(s<r)return"单笔最大捐赠金额为"+s/1e4+"万元"}}return""},r=function(e,t){return isEmpty(e.skuCore)||isEmpty(e.skuCore.sku2info)||isEmpty(e.skuCore.sku2info[t.id_biz_property.skuId])||isEmpty(e.skuCore.sku2info[t.id_biz_property.skuId].quantityText)?"":e.skuCore.sku2info[t.id_biz_property.skuId].quantityText},a=function(e,t){var i;return isEmpty(e.skuCore)||isEmpty(e.skuCore.skuItem)||!isTrue(e.skuCore.skuItem.hideQuantity)?(i=r(e,t),isEmpty(i)?"库存"+b(e,t)+"件":i):""},b=function(e,t){return isEmpty(e.skuCore)||isEmpty(e.skuCore.sku2info)||(e=isEmpty(e.skuCore.sku2info[t.id_biz_property.skuId])||isEmpty(e.skuCore.sku2info[t.id_biz_property.skuId].quantity)?0:parseInt(e.skuCore.sku2info[t.id_biz_property.skuId].quantity),isNaN(e))?0:e},I=function(e,t){var i="",r=m(e,t),s=v(e,t);return(1<r||s!==Number.MAX_VALUE)&&(i+="(",1<r&&(i+="仅支持"+r+"倍购买"),s!==Number.MAX_VALUE&&(i+="限购"+s+"件"),i+=")"),isEmpty(e.skuCore)||isEmpty(e.skuCore.sku2info)||isEmpty(e.skuCore.sku2info[t.id_biz_property.skuId])||isEmpty(e.skuCore.sku2info[t.id_biz_property.skuId].limitText)||(i=e.skuCore.sku2info[t.id_biz_property.skuId].limitText),isEmpty(e.skuCore)||isEmpty(e.skuCore.abSwitch)||!isTrue(e.skuCore.abSwitch.enableShowPic)||(i+=a(e,t)),i},m=function(e,t){var i=1;return isEmpty(e.skuCore)||isEmpty(e.skuCore.skuItem)||isEmpty(e.skuCore.skuItem.unitBuy)||(i=parseInt(e.skuCore.skuItem.unitBuy),(isEmpty(i)||i<=0)&&(i=1)),i},C=function(e,t){return!(isEmpty(e.skuCore)||isEmpty(e.skuCore.sku2info)||isEmpty(e.skuCore.sku2info[t.id_biz_property.skuId])||isEmpty(e.skuCore.sku2info[t.id_biz_property.skuId].moreQuantity))&&isTrue(e.skuCore.sku2info[t.id_biz_property.skuId].moreQuantity)},h=function(e,t){return isEmpty(e.skuCore)||isEmpty(e.skuCore.sku2info)||isEmpty(e.skuCore.sku2info[t.id_biz_property.skuId])||isEmpty(e.skuCore.sku2info[t.id_biz_property.skuId].quantityCheckTransParams)?{}:e.skuCore.sku2info[t.id_biz_property.skuId].quantityCheckTransParams};return function(){return{initContext:e,getComponentId:p,saveStoredData:t,getDisplayData:i}}}(),function(){function e(e,t){var i;e=e.originalData,a={},isEmpty(e.services)||isEmpty(e.services.skuExtendedServices)||!isArray(e.services.skuExtendedServices)||isEmpty(e.services.skuExtendedServices[0].items)||(i=isTrue(e.services.skuExtendedServices[0].mustSelect),e.services.skuExtendedServices[0].items.forEach(function(e,t){isTrue(e.selected)&&(i=!1,a.select=o(e))}),i&&1===e.services.skuExtendedServices[0].items.length&&(e=e.services.skuExtendedServices[0].items[0],a.select=o(e)))}function t(e,t){return{checkedServiceUnique:a}}function i(e,t){return function(e,t){e=e.storedData[n(e,t)];isEmpty(e)||(a=e.checkedServiceUnique||{})}(e,t),s(e.originalData,e.opData),r(e)}function r(e,t){var i,r,e=e.originalData,s=[];return isEmpty(e.services)||isEmpty(e.services.skuExtendedServices)||!isArray(e.services.skuExtendedServices)||isEmpty(e.services.skuExtendedServices[0].items)?{}:(i=e.services.skuExtendedServices[0].title,r=isEmpty(a.select)?null:a.select.serviceId,e.services.skuExtendedServices[0].items.forEach(function(e,t){r===e.serviceId?s.push({name:e.title,selected:!0,tradeParams:o(e)}):s.push({name:e.title,selected:!1,tradeParams:o(e)})}),isTrue(e.services.skuExtendedServices[0].mustSelect)&&isEmpty(a.select)?a.checkTips="请选择"+i:a.checkTips=null,{title:i,items:s})}function s(e,t){var i;"change_custom_service"===t.type&&!isEmpty(t.extraParams)&&isArray(t.extraParams)&&(i=!(t=t.extraParams[0]).selected,a.select=i?t.tradeParams:{})}var a={},o=function(e){return{serviceId:e.serviceId,cartActionUrl:e.cartActionUrl,buyActionUrl:e.buyActionUrl,cartBtnText:e.cartBtnText,buyBtnText:e.buyBtnText}},n=function(e,t){return"id_biz_custom_service"};return function(){return{initContext:e,getComponentId:n,saveStoredData:t,getDisplayData:i}}}(),function(){function e(e,t){var i=_(e.originalData),r=function(e){var t={};if(!isEmpty(e.extInput)&&!isEmpty(e.extInput.id_biz_service)&&!isEmpty(e.extInput.id_biz_service.serviceId))for(var i=e.extInput.id_biz_service.serviceId.split("-"),r=0,s=i.length;r<s;r++){var a=i[r].split("|");!isEmpty(a)&&2<=a.length&&(t[a[0]]=a[1])}return t}(e);i?n(e.storedData,i,b(e.originalData),r):u(e.originalData,e.storedData,r),f(e,t)}function t(e,t){return{fixedServiceUnique:d,checkedServiceUnique:y}}function i(e,t){!function(e,t){e=e.storedData[k(e,t)];isEmpty(e)||(d=e.fixedServiceUnique||{},y=e.checkedServiceUnique||{})}(e,t),a(e.originalData,e.opData),o(0,e.opData),i=e,(t=t).skuId!==i.storedData.id_biz_property.skuId&&(f(i,t),(t=_(i.originalData))?n(i.storedData,t,b(i.originalData)):u(i.originalData,i.storedData));var p,c,i,r,m,l,t=_(e.originalData);return t?(p=e.originalData,c=e.storedData,i=t,t=b(e.originalData),m=c.id_biz_property.skuId,(l=t[m])?(r=[],i.forEach(function(e){var t={title:e.title,items:[]};e.items&&e.items.forEach(function(e){var o={value:[]},n=e.serviceId,u="";e.uniqueServices&&e.uniqueServices.forEach(function(e){var t,i,r=e.uniqueId,s=n+":"+r,a=l[s];a&&(t=!(E(n,r)||"0"===m&&hasSku(p,c)),i=v(n,r),isTrue(i)&&(u=r),o.value.push({name:e.name,titleColor:getSkuModuleColorInfo(t,i).titleColor,borderColor:getSkuModuleColorInfo(t,i).borderColor,backgroundColor:getSkuModuleColorInfo(t,i).backgroundColor,descColor:getSkuModuleColorInfo(t,!0).titleColor,suId:s,canSelect:t,selected:i,desc:a.desc,cells:isTrue(a.cells),price:"￥"+(a.price/100).toFixed(2)}))}),o.value.length&&(o.name=e.name,o.desc=e.desc,o.serviceId=e.serviceId,o.action=e.action,o.actionLink=e.actionLink,isEmpty(u)||(o.actionLink=o.actionLink+"&selectedUniqueId="+u),o.serviceItemSkuId=u,t.items.push(o))}),t.items.length&&r.push(t)}),r):[]):s(e)}function s(e,t){var c,m=e.originalData,l=e.storedData,d=[];return isEmpty(m.services)||isEmpty(m.services.sku2serviceMap)||(c=r(m,l),e=m.services.sku2serviceMap[l.id_biz_property.skuId],isEmpty(e))||!isArray(e)?d:(e.forEach(function(o,e){var t,i,r,s,n,a,u=c[o.serviceId],p=o.serviceSkuPrices;isEmpty(p)?(t=!isNumberGreaterThan(o.price,0),i=isEmpty(o.extraDisplayText)?"[商家赠送]":o.extraDisplayText,a=u.name,t=t?i:"￥"+(o.price/100).toFixed(2),i=o.serviceId+":0",r=v(u.serviceId,"0"),s=l.id_biz_property.skuId,s=!(E(serviceId,uniqueId)||"0"===s&&hasSku(m,l)),d.push({name:a,value:[{name:a,price:t,titleColor:getSkuModuleColorInfo(s,r).titleColor,borderColor:getSkuModuleColorInfo(s,r).borderColor,backgroundColor:getSkuModuleColorInfo(s,r).backgroundColor,suId:i,canSelect:s,selected:r,cells:!0}]})):(n=[],a=u.name,p.forEach(function(e,t){var i=u.children[e.uniqueId],r=!isNumberGreaterThan(e.price,0),s=isEmpty(e.extraDisplayText)?"[商家赠送]":e.extraDisplayText,r=r?s:"￥"+(e.price/100).toFixed(2),s=o.serviceId+":"+e.uniqueId,i=(isEmpty(i.name)?u:i).name,a=v(o.serviceId,e.uniqueId),e=!(E(u.serviceId,e.uniqueId)||"0"===l.id_biz_property.skuId&&hasSku(m,l));n.push({name:i,price:r,titleColor:getSkuModuleColorInfo(e,a).titleColor,borderColor:getSkuModuleColorInfo(e,a).borderColor,backgroundColor:getSkuModuleColorInfo(e,a).backgroundColor,suId:s,canSelect:e,selected:a,cells:!0})}),isEmpty(n)||d.push({name:a,value:n}))}),[{title:"特色服务",items:d}])}function a(e,t){var i,r;"change_service"===t.type&&!isEmpty(t.extraParams)&&isArray(t.extraParams)&&(t=t.extraParams[0]).canSelect&&(r=(i=t.suId.split(":"))[0],!t.selected?p(e,r,i[1],!1):y.hasOwnProperty(r)&&delete y[r])}function o(e,t){"service_update"!==t.type||isEmpty(t=t.eventData)||isEmpty(t.serviceId)||isEmpty(t.uniqueId)||(y[t.serviceId]=t.uniqueId)}var d={},y={},p=function(e,t,i,r){isEmpty(e.services)||isEmpty(t)||isEmpty(i)||(e=isTrue(e.services.multiSelect),isTrue(r)?(e||isEmpty(d))&&(e||isEmpty(y)||(y={}),d[t]=i):(e||isEmpty(d))&&((y=e||isEmpty(y)?y:{})[t]=i))},r=function(e){var s;return isEmpty(e.services)||isEmpty(e.services.allServices)?{}:(s={},e.services.allServices.forEach(function(e,t){var i,r=e.uniqueServices;isEmpty(r)||(i={},r.forEach(function(e,t){i[e.uniqueId]=e}),e.children=i),s[e.serviceId]=e}),s)},n=function(e,t,i,r){d={},y={};var s=i[e.id_biz_property.skuId];s&&t.forEach(function(e){e.items&&e.items.forEach(function(e){var t=e.serviceId,i=e.uniqueServices||[];isTrue(e.mustSelect)?1===i.length&&s[t+":"+i[0].uniqueId]&&(d[t]=i[0].uniqueId):(i.forEach(function(e){isEmpty(r)&&isTrue(e.autoSelect)&&s[t+":"+e.uniqueId]&&(y[t]=e.uniqueId)}),isEmpty(r)||r.hasOwnProperty(t)&&(y[t]=r[t]))})})},u=function(o,e,n){var u;d={},y={},isEmpty(o.services)||isEmpty(o.services.sku2serviceMap)||(u=r(o),e=o.services.sku2serviceMap[e.id_biz_property.skuId],!isEmpty(e)&&isArray(e)&&e.forEach(function(e,t){var r,s=u[e.serviceId],e=e.serviceSkuPrices,a=isTrue(s.mustSelect),i=isTrue(s.autoSelect);isEmpty(e)?a?p(o,s.serviceId,"0",!0):(isEmpty(n)&&i&&p(o,s.serviceId,"0",!1),isEmpty(n)||n.hasOwnProperty(s.serviceId)&&p(o,s.serviceId,"0",!1)):(r=e.length,e.forEach(function(e,t){var e=s.children[e.uniqueId],i=isTrue(e.autoSelect);a&&1===r?p(o,s.serviceId,e.uniqueId,!0):isEmpty(n)&&i&&p(o,s.serviceId,e.uniqueId,!1),!isEmpty(n)&&isEmpty(d[s.serviceId])&&n.hasOwnProperty(s.serviceId)&&p(o,s.serviceId,n[s.serviceId],!1)}))}))},f=function(e,t){t.skuId=e.storedData.id_biz_property.skuId},k=function(e,t){return"id_biz_service"},E=function(e,t){return isEmpty(t)?!isEmpty(d[e]):d[e]===t},v=function(e,t){return isEmpty(t)?!isEmpty(d[e]||!isEmpty(y[e])):d[e]===t||y[e]===t},_=function(e){try{var t=e.services.standardServiceV2;if(t)return t}catch(e){}return null},b=function(e){try{var t=e.services.sku2StandardServiceV2;if(t)return t}catch(e){console.log("getNewSkuServiceMapError: "+e.stack)}return{}};return function(){return{initContext:e,getComponentId:k,saveStoredData:t,getDisplayData:i}}}(),function(){function e(e,t){var i,r,s;!function(e,t){if(f={},k={},isEmpty(e.skuVertical)||isEmpty(e.skuVertical.newInstallments)||isEmpty(e.skuVertical.newInstallments.creditInfos))return!1;var i=null,r=(isEmpty(t.id_biz_installment)||isEmpty(t.id_biz_installment.installmentInstId)||(i=t.id_biz_installment.installmentInstId),null);!isEmpty(t.id_biz_installment)&&isTrue(t.id_biz_installment.installmentPay)&&(r=t.id_biz_installment.installmentNum+":"+t.id_biz_installment.installmentRate);for(var s=0,a=e.skuVertical.newInstallments.creditInfos.length;s<a;s++){var o,n=e.skuVertical.newInstallments.creditInfos[s];if(!isEmpty(i)&&n.installmentInstId===i||isTrue(n.isSelect))return o=n.installmentInstId,f[o]=!0,f.tradeParams={installmentAssetTypeCode:n.installmentAssetTypeCode,installmentInstId:n.installmentInstId},isEmpty(n.period)||n.period.forEach(function(e,t){e=e.count+":"+e.ratio;if(e===r)return k[e]=!0}),!0}return!0}(e.originalData,e.extInput)&&(i=e.extInput,f={},k={},isEmpty((e=e.originalData).skuVertical)||isEmpty(e.skuVertical.installment)||isEmpty(e.skuVertical.installment.period)||(r="",!isEmpty(i.id_biz_installment)&&isTrue(i.id_biz_installment.installmentPay)&&(r=i.id_biz_installment.installmentNum+":"+i.id_biz_installment.installmentRate),s={},e.skuVertical.installment.period.forEach(function(e,t){var i=e.count+":"+e.ratio;i===r?s.extInput=i:isTrue(e.selected)&&(s.periodInfo=i)}),isEmpty(s.extInput)?isEmpty(s.periodInfo)||(k[s.periodInfo]=!0):k[s.extInput]=!0))}function t(e,t){return{checkedInstallment:k,checkedBankInfo:f}}function i(e,t){var i,r,s,a,o,n,u,p,c,m,l,d,y;return function(e,t){e=e.storedData[v(e,t)];isEmpty(e)||(k=e.checkedInstallment||{},f=e.checkedBankInfo||{})}(e,t),e.originalData,"change_installment"===(t=e.opData).type&&!isEmpty(t.extraParams)&&isArray(t.extraParams)&&(t=t.extraParams[0]).canSelect&&(!t.selected?(k=isEmpty(k)?k:{})[t.crId]=!0:k.hasOwnProperty(t.crId)&&delete k[t.crId]),"change_installment_bank"===(t=e.opData).type&&!isEmpty(t.extraParams)&&isArray(t.extraParams)&&(t=t.extraParams[0]).canSelect&&(k={},!t.selected?((f=isEmpty(f)?f:{})[t.instId]=!0,f.tradeParams=t.tradeParams,E=!0):f.hasOwnProperty(t.instId)&&delete f[t.instId]),function(e,t){e=b(e,t);return!(isEmpty(e)||!isTrue(e.hideInstallment))}(e.originalData,e.storedData)?{}:(n=e.originalData,u=e.storedData,p=e.extInput,t={},isEmpty(n.skuVertical)||isEmpty(n.skuVertical.newInstallments)||isEmpty(n.skuVertical.newInstallments.creditInfos)||(c=[{text:n.skuVertical.newInstallments.text,style:{size:"1.0",bold:"false",italic:"false",strikeThrough:"false"},event:{}}],m=[],l=[],d=null,y="",isEmpty(n.skuVertical)||isEmpty(n.skuVertical.newInstallments)||isEmpty(n.skuVertical.newInstallments.sku2Installment)||(d=n.skuVertical.newInstallments.sku2Installment),n.skuVertical.newInstallments.creditInfos.forEach(function(e,t){var i=isTrue(f[e.installmentInstId]),r=_(n,u);i&&(c.push({text:e.nameCoupon,style:{size:"0.857",color:"#fc511e",bold:"false",italic:"false",strikeThrough:"false"},event:{}}),y=e.utParams,l=I(n,e,d,"bank"===e.roundType,i&&r&&isTrue(e.enable),u,p)),m.push({name:e.name,icon:e.iconUrl,tips:e.tips,titleColor:getSkuModuleColorInfo(r,i).titleColor,borderColor:getSkuModuleColorInfo(r,i).borderColor,backgroundColor:getSkuModuleColorInfo(r,i).backgroundColor,instId:e.installmentInstId,canSelect:r,selected:i,utParams:e.utParams,tradeParams:{installmentAssetTypeCode:e.installmentAssetTypeCode,installmentInstId:e.installmentInstId}})}),isEmpty(m)||(t.isNewInstallment={show:"true"},t.title=c,t.exposureParams=n.skuVertical.newInstallments.exposureParams,t.selectedBankParams=y,t.bankList=m,t.selectedBankPeriodList=l,t.viewId="newInstallment",t.shouldScrollToBankPeriod=E),E=!1),isEmpty(t=t)&&(i=e.originalData,r=e.storedData,e=e.extInput,s=null,isEmpty(i.skuVertical)||(s=i.skuVertical.installment),a=_(i,r),isEmpty(i.skuVertical)||isEmpty(i.skuVertical.installment)||(a&=isTrue(i.skuVertical.installment.enable)),o=null,isEmpty(i.skuVertical)||isEmpty(i.skuVertical.installment)||isEmpty(i.skuVertical.installment.sku2Installment)||(o=i.skuVertical.installment.sku2Installment),t=I(i,s,o,!1,a,r,e)),t)}var f={},k={},E=!1,v=function(e,t){return"id_biz_installment"},m=function(e,t){var i=-1;return isEmpty(e)||(i=e[t.id_biz_property.skuId]/100,isNaN(i)&&(i=-1)),i},l=function(e,t){var s;return isEmpty(e.services)||isEmpty(e.services.sku2serviceMap)||(s={},e=e.services.sku2serviceMap[t.id_biz_property.skuId],isEmpty(e))||!isArray(e)?{}:(e.forEach(function(e,t){var i,r=e.serviceSkuPrices;isEmpty(r)||(i={},r.forEach(function(e,t){i[e.uniqueId]=e}),e.children=i),s[e.serviceId]=e}),s)},d=function(e,t){var i=0;if(!isEmpty(e.services)&&!isEmpty(e.services.sku2StandardServiceV2)){var r=e.services.sku2StandardServiceV2[t.id_biz_property.skuId];for(n in t.id_biz_service.fixedServiceUnique){var s=t.id_biz_service.fixedServiceUnique[n];i+=parseNumberWithDefaultZero(r[n+":"+s].price/100)}for(p in t.id_biz_service.checkedServiceUnique){var a=t.id_biz_service.checkedServiceUnique[p];i+=parseNumberWithDefaultZero(r[p+":"+a].price/100)}}else{var o=l(e,t);if(!isEmpty(o)){if(!isEmpty(t.id_biz_service.fixedServiceUnique)){var n,u=t.id_biz_service.fixedServiceUnique;for(n in u){s=u[n];i+=parseNumberWithDefaultZero("0"===s?o[n].price/100:o[n].children[s].price/100)}}if(!isEmpty(t.id_biz_service.checkedServiceUnique)){var p,c=t.id_biz_service.checkedServiceUnique;for(p in c){a=c[p];i+=parseNumberWithDefaultZero("0"===a?o[p].price/100:o[p].children[a].price/100)}}}}return i},y=function(e,t,i){var r,s,a,o=0;return isEmpty(e.skuCore)||isEmpty(e.skuCore.sku2info)||(i=getBottomBarMode(e,t,i),r=e.skuCore.sku2info,s={},isEmpty(r[t.id_biz_property.skuId])||(s=r[t.id_biz_property.skuId].price),a=null,"BUYNOW"===i?isEmpty(r[t.id_biz_property.skuId])||(a=r[t.id_biz_property.skuId].subPrice):(isEmpty(r[t.id_biz_property.skuId])||isEmpty(r[t.id_biz_property.skuId].cart)||(a=r[t.id_biz_property.skuId].cart.subPrice),isEmpty(a)&&!isEmpty(r[t.id_biz_property.skuId])&&(a=r[t.id_biz_property.skuId].subPrice)),isEmpty(a)?isEmpty(s)||(o=s.priceMoney/100):o=a.priceMoney/100,isNaN(o)&&(o=0),o+=d(e,t)),o},_=function(e,t){return!hasSku(e,t)||"0"!==t.id_biz_property.skuId},b=function(e,t){var i=[];isEmpty(e.skuCore)||isEmpty(e.skuCore.skuBuy)||isEmpty(e.skuCore.skuBuy.buyPattern)||isEmpty(e.skuCore.skuBuy.buyPattern.type)||(i=e.skuCore.skuBuy.buyPattern.type);for(var r=0,s=(i=isEmpty(e.skuCore)||isEmpty(e.skuCore.skuBuy)||isEmpty(e.skuCore.skuBuy.skuPattern)||isEmpty(e.skuCore.skuBuy.skuPattern.type)?i:e.skuCore.skuBuy.skuPattern.type).length;r<s;r++){var a=i[r];if(t.id_biz_buy_method.method===a.bizId)return a}return{}},I=function(e,t,i,o,n,r,s){var u,p,c,a={};return isEmpty(t)||isEmpty(t.period)||(i=m(i,r),isNumberLessThan(i,0)?i=y(e,r,s):i+=d(e,r),u=i*r.id_biz_quantity.quantity.currentNum,p=[{text:t.title.substring(0,4),style:{size:"1.0",bold:"false",italic:"false",strikeThrough:"false"},event:{}},{text:4<t.title.length?t.title.substring(4):"",style:{size:"0.857",color:"#ffaaaaaa",bold:"false",italic:"false",strikeThrough:"false"},event:{}}],c=[],t.period.forEach(function(e,t){var i=e.count+":"+e.ratio,r=isTrue(k[i]),s=0,s=o?Math.round(100*u/e.count)/100:Math.floor(100*u/e.count)/100,a=0,a=o?Math.round(100*u*e.ratio/e.count)/100:Math.floor(100*u*e.ratio/e.count)/100;c.push({name:"分"+e.count+"期 ("+(0<+e.ratio?"含":"0")+"手续费)",desc:"￥"+(s+a).toFixed(2)+"/期",titleColor:getSkuModuleColorInfo(n,r).titleColor,borderColor:getSkuModuleColorInfo(n,r).borderColor,backgroundColor:getSkuModuleColorInfo(n,r).backgroundColor,crId:i,extra:isNumberLessAndEquals(u*e.ratio*100,e.couponPrice)?e.coupon:"",canSelect:n,selected:r,utParams:e.utParams||JSON.stringify({count:e.count,ratio:e.ratio})}),r&&!isEmpty(e.subTitle)&&p.push({text:e.subTitle,style:{size:"0.857",color:"#fc511e",bold:"false",italic:"false",strikeThrough:"false"}})}),isEmpty(c))||(a.isOldInstallment={show:"true"},a.title=p,a.subTitle=t.subTitle,a.viewId="installment",a.period=c),a};return function(){return{initContext:e,getComponentId:v,saveStoredData:t,getDisplayData:i}}}(),function(){function e(e,t){f={},k={};var r=e.originalData;isEmpty(r.skuBase)||isEmpty(r.skuBase.components)||r.skuBase.components.forEach(function(e,t){var i;E(e)&&(i=e.key,e=n(r,e,null),f[i]=e)})}function t(e,t){return{checkedComponent:f,nextPageElementData:k}}function i(e,t){!function(e,t){e=e.storedData[r(e,t)];isEmpty(e)||(f=e.checkedComponent||{},k=e.nextPageElementData||{})}(e,t),function(e,t){if("outer_input"===t.type&&!isEmpty(t.eventData)&&!isEmpty(t.eventData.comKey)&&"alicom_data_input"!==!t.eventData.action&&isTrue(t.eventData.isComplete))for(var i=k[t.eventData.comKey],r=((i=isEmpty(i)?{}:i)[t.eventData.elementKey]={hasSelected:!0,value:t.eventData.elementKey,params:t.eventData.params,selectedTips:t.eventData.selectedTips},k[t.eventData.comKey]=i,e.skuBase.components.length),s=0;s<r;s++){var a=e.skuBase.components[s];if(E(a)){var o=a.key;if(o==t.eventData.comKey){f[o]=n(e,a,t.eventData.elementKey);break}}}}(e.originalData,e.opData),function(e,t){if("change_component"===t.type&&!isEmpty(t.extraParams)&&isArray(t.extraParams)){var i=t.extraParams[0];if(!isEmpty(i.comKey))for(var r=e.skuBase.components.length,s=0;s<r;s++){var a=e.skuBase.components[s];if(E(a)){var o=a.key;if(o==i.comKey){f[o]=n(e,a,i.value);break}}}}}(e.originalData,e.opData);var y=e.originalData,i=[];return isEmpty(y.skuBase)||isEmpty(y.skuBase.components)||y.skuBase.components.forEach(function(m,e){var l,d;E(m)&&((l={}).title=m.text,d=[],m.elements.forEach(function(e,t){var i={},r=f[m.key];if(isEmpty(r)||e.value!==r.value)i={title:e.text,titleColor:"#333333",borderColor:"#f5f5f5",backgroundColor:"#f5f5f5",comKey:m.key,value:e.value};else{var i={title:e.text,titleColor:"#fc511e",borderColor:"#fc511e",backgroundColor:"#FFF9F9",comKey:m.key,value:e.value},s={};if(!isEmpty(y.skuVertical)&&!isEmpty(y.skuVertical.contractData))for(var a=y.skuVertical.contractData,o=a.length,n=0;n<o;n++){var u=a[n];if(!isEmpty(u.version)&&u.version.versionCode===e.value){s=u;break}}var r=!1,p=("1010@99@99"!==e.value&&(isEmpty(e.altText)||isEmpty(e.altTitle))||(r=!0),isEmpty(e.subText)||(r=!0),""),c=(isEmpty(k[m.key])||isEmpty(k[m.key][e.value])||(c=k[m.key][e.value],isEmpty(c))||!isTrue(c.hasSelected)||isEmpty(c.selectedTips)||(p=c.selectedTips),isEmpty(p)&&!isEmpty(s.version)&&(p=s.version.nativeDesc),isEmpty(p)&&(p=e.altText),!1);isEmpty(s.version)||(c=isTrue(s.version.enableClick)),l.showDesc=r,l.tips=e.altTitle,l.desc=p,l.subDesc=e.subText,l.enableClick=c,l.key=m.key,l.action=e.altTextClickAction,l.version=e.value}d.push(i)}),l.value=d,i.push(l))}),i}var f={},k={},d=function(e,t,i){if(!isEmpty(e)&&!isEmpty(t)&&E(t)){for(var r=t.elements.length,s=0;s<r;s++){var a=t.elements[s];if(/*!isEmpty(selectedValue) && */i===a.value)return a}for(var o=0;o<r;o++){var n=t.elements[o];if(!isEmpty(f)&&!isEmpty(f[t.key])&&f[t.key].value===n.value)return n}for(var u=0;u<r;u++){var p=t.elements[u];if(isTrue(p.selected))return p}}return{}},E=function(e){if(!isEmpty(e.data))try{var t,i=JSON.parse(e.data);for(t in i)"data"!=t&&(e[t]=i[t]);return!0}catch(e){var r="initComponentElementError: "+e.stack;console.log(r),nativeBridgeCall("umbrellaAlarm","alarm001",r)}return!1},n=function(e,t,i){if(isEmpty(e)||isEmpty(t)||!E(t))return{};var r=!1,s=null,a=t.text,o={},i=d(e,t,i);if(!isEmpty(i)){var s=i.value,n={};if(!isEmpty(e.skuVertical)&&!isEmpty(e.skuVertical.contractData))for(var u=e.skuVertical.contractData.length,p=0;p<u;p++){var c=e.skuVertical.contractData[p];if(!isEmpty(c)&&!isEmpty(c.version)&&s==c.version.versionCode){n=c;break}}a=i.altTitle,"1010@99@99"!=s&&!isEmpty(i.altText)||(r=!0);var m={};if(isEmpty(k[t.key])||isEmpty(k[t.key][i.value])||(m=k[t.key][i.value]),isTrue(r)||!isEmpty(m)&&isTrue(m.hasSelected)&&(r=!0),isEmpty(n.version)||(isTrue(n.version.noShopCart)?o.alicom_wtt_cart="0":o.alicom_wtt_cart="1","1010@99@99"==n.version.versionCode&&(o.alicom_wtt_param=n.version.planId+"_0_0_0_0_0_"+n.version.versionCode)),o[t.key]=s,!isEmpty(m)&&!isEmpty(m.params))for(var l in m.params)o[l]=m.params[l]}return{currentElementTips:a,hasSelected:r,value:s,params:o}},r=function(e,t){return"id_biz_component"};return function(){return{initContext:e,getComponentId:r,saveStoredData:t,getDisplayData:i}}}(),function(){function e(e,t){}function t(e,t){return"id_biz_size_chart"}function i(e,t){return{}}function r(e,t){return e=e.originalData,s={},s=isEmpty(e.skuCore)||isEmpty(e.skuCore.skuItem)||(i=e.skuCore.skuItem,r={},isEmpty(i.recommendSize)||(r.recommendSize=e.skuCore.skuItem.recommendSize),isEmpty(i.recommendTip)||(r.recommendTip=e.skuCore.skuItem.recommendTip),isEmpty(i.buttonUrl)?r.buttonUrl="https://pages.tmall.com/wow/a/act/tmall/dailygroup/1023/wupr?wh_pid=daily-178740&wx_navbar_hidden=true&wx_navbar_transparent=true&disableNav=YES&enterType=detail":r.buttonUrl=i.buttonUrl,isEmpty(i.buttonText)||(r.buttonText=e.skuCore.skuItem.buttonText),isEmpty(e.item)||(r.itemId=e.item.itemId,r.categoryId=e.item.categoryId),isEmpty(e.seller)||(r.sellerId=e.seller.userId),isEmpty(r.recommendSize)&&isEmpty(r.recommendTip)&&isEmpty(r.buttonText))?s:r;var i,r,s}return function(){return{initContext:e,getComponentId:t,saveStoredData:i,getDisplayData:r}}}(),function(){function e(e,t){}function t(e,t){return"id_biz_area"}function i(e,t){return{}}function r(e,t){return i=e.originalData,e=e.storedData,p={},isEmpty(i.skuCore)||isEmpty(i.skuCore.skuItem)||isEmpty(i.skuCore.skuItem)||!isTrue(i.skuCore.skuItem.showAddress)&&!isTrue(i.skuCore.skuItem.showAddressTaobao)||(r="请配送配送区域",e=c(i,e),isEmpty(i.delivery)||(r=i.delivery.completedTo||i.delivery.to||"请配送配送区域"),s="//market.m.taobao.com/apps/market/detailrax/address-picker.html?spm=a2116h.app.0.0.16d957e9nDYOzv&wh_weex=true",isEmpty(i.delivery)||(s=i.delivery.addressWeexUrl||s),n=o=a="",u="tmall",isEmpty(i.seller)||(a=i.seller.userId||""),isEmpty(i.item)||(o=i.item.itemId||""),isEmpty(i.delivery)||(n=i.delivery.areaId||""),!isEmpty(i.skuCore.skuItem)&&isTrue(i.skuCore.skuItem.showAddressTaobao)&&(u="taobao"),-1===s.indexOf("?")?s+="?":s+="&",s+="currentAddress="+encodeURIComponent(r)+"&seller_id="+a+"&item_id="+o,p={title:[{text:"配送区域",style:{size:"1.0",bold:"false",italic:"false",strikeThrough:"false"},event:{}},{text:"(配送地可能会影响库存,请正确选择)",style:{size:"0.857",color:"#ffaaaaaa",bold:"false",italic:"false",strikeThrough:"false"},event:{}}],location:r,info:e,itemId:o,areaId:n,itemType:u,loadUrl:encodeURIComponent(s),wrapperUrl:"https://arealocation.taobao.com/home.htm"}),p;var i,r,s,a,o,n,u,p}var c=function(e,t){var i;return isEmpty(e.skuCore)||isEmpty(e.skuCore.skuItem)||!isTrue(e.skuCore.skuItem.showAddress)&&!isTrue(e.skuCore.skuItem.showAddressTaobao)||isEmpty(e.skuCore)||isEmpty(e.skuCore.sku2info)||(i="",t=e.skuCore.sku2info[t.id_biz_property.skuId],e=!isEmpty(e.skuCore)&&!isEmpty(e.skuCore.abSwitch)&&isTrue(e.skuCore.abSwitch.enableShowPic),isEmpty(t)||isTrue(e)||(i=t.logisticsTime),isEmpty(i))?"":i};return function(){return{initContext:e,getComponentId:t,saveStoredData:i,getDisplayData:r}}}(),function(){function e(e,t){}function t(e,t){return{}}function i(e,t){return function(e,t){var i,s,a;if(!(isEmpty(e.resource)||isEmpty(e.resource.relatedAuctions)||isEmpty(e.resource.relatedAuctions.items)))return(i={}).title=e.resource.relatedAuctions.title,e=e.resource.relatedAuctions.items,s=t[r()],a=[],e.forEach(function(e,t){var i,r=e.price;isEmpty(s)||(i=s.relatedAuction,isEmpty(i))||(i=i[e.itemId],isEmpty(i))||(r=i.price),a.push({itemId:e.itemId,title:e.itemNameList.join(" "),price:r||"",current:e.current,params:e.params,relatedAuctionParams:e.relatedAuctionParams,benefitTips:e.benefitTips,titleColor:getSkuModuleColorInfo(!0,isTrue(e.current)).titleColor,borderColor:getSkuModuleColorInfo(!0,isTrue(e.current)).borderColor,backgroundColor:getSkuModuleColorInfo(!0,isTrue(e.current)).backgroundColor,priceColor:getSkuModuleColorInfo(!0,isTrue(e.current)).titleColor})}),isEmpty(a)||(i.items=a),i}(e.originalData,e.extInput)}var r=function(e,t){return"id_biz_relatedAuctions"};return function(){return{initContext:e,getComponentId:r,saveStoredData:t,getDisplayData:i}}}(),function(){function e(e,t){}function t(e,t){return"id_biz_maochao_cpu"}function i(e,t){return{}}function r(e,t){var i={},e=e.originalData;if(!isEmpty(e)){var r,s,e=e.skuCore;if(!(isEmpty(e)||isEmpty(e.relatedActionsData)||isEmpty(e.relatedActionsData.skuRelatedDOs)))try{s={};var a=s=isEmpty(r=e)||isEmpty(r.relatedActionsData)||isEmpty(r.relatedActionsData.skuRelatedDOs)?s:r.relatedActionsData;i.skuBeans=function(e){var t={};if(!isEmpty(e)&&!isEmpty(e.skuRelatedDOs)){var i=e.skuRelatedDOs;if(!isEmpty(i)){t.skuItemBeans=[];for(var r=0;r<i.length;r++){var s=i[r];if(!isEmpty(s)){t.skuItemBeans[r]={},t.skuItemBeans[r].img=s.img,t.skuItemBeans[r].title=s.title;var a=s.items;if(!isEmpty(a)){for(var o=[],n=0;n<a.length;n++){var u=a[n];o[n]={},o[n].current=u.current,o[n].itemId=u.itemId,o[n].groupId=s.params.groupId,o[n].price=u.price,o[n].itemNameList={},o[n].itemNameList=u.itemNameList,o[n].params={},isEmpty(u.requestParams)?o[n].disabled="true":(isTrue(u.requestParams.canBuy)&&!isTrue(u.requestParams.isSellout)?o[n].disabled="false":o[n].disabled="true",o[n].params.locType=u.requestParams.locType)}t.skuItemBeans[r].skuItems=[],t.skuItemBeans[r].skuItems=o}}}}}return t}(a),i.currentItem=function(e){var t={};if(!isEmpty(e)&&!isEmpty(e.skuRelatedDOs)){var i=e.skuRelatedDOs;if(!isEmpty(i))for(var r=0;r<i.length;r++){var s=i[r];if(!isEmpty(s)){var a=s.items;if(!isEmpty(a))for(var o=0;o<a.length;o++)if(t=a[o],isTrue(t.current)){try{var n=s.params.groupId;t.groupId=n}catch(e){}return t}}}}return t}(a)}catch(e){}}return i}return function(){return{initContext:e,getComponentId:t,saveStoredData:i,getDisplayData:r}}}(),function(){function e(e,t){var i;i=e.originalData,f={},p(i,e.storedData)}function t(e,t){return{skuIdMap2SelectItems:f}}function i(e,t){var i,r,s,a;return function(e,t){e=e.storedData[c(e,t)];isEmpty(e)||(f=e.skuIdMap2SelectItems||{})}(e,t),t=e.originalData,i=e.storedData,"change_normal_select"===(r=e.opData).type&&!isEmpty(r.extraParams)&&isArray(r.extraParams)&&(r=r.extraParams[0]).canSelect&&(a=(s=r.geId.split(":"))[0],(!r.selected?u:n)(t,i,a,s[1])),p(e.originalData,e.storedData),o(e)}function o(e,t){var m=e.originalData,l=e.storedData,i=[];return isEmpty(m.skuCore)||isEmpty(m.skuCore.sku2info)||(e=l.id_biz_property.skuId,e=m.skuCore.sku2info[e],isEmpty(e))||(e=e.eachSkuProms,isEmpty(e))||e.forEach(function(s,e){var a,o,n,u,p,c,t;isEmpty(s.items)||(p=u=n="",c=o=!(a=[]),s.items.forEach(function(e,t){var i=y(m,l,s.groupId,e.eachId),r=!0,r=!d(m,l,s.groupId,e.eachId);a.push({name:e.name,tips:e.tip,widthMode:e.widthMode,geId:s.groupId+":"+e.eachId,titleColor:getSkuModuleColorInfo(r,i).titleColor,borderColor:getSkuModuleColorInfo(r,i).borderColor,backgroundColor:getSkuModuleColorInfo(r,i).backgroundColor,cornerTextColor:getSkuModuleColorInfo(r,i).cornerTextColor,cornerBorderColor:getSkuModuleColorInfo(r,i).cornerBorderColor,cornerBackgroundColor:getSkuModuleColorInfo(r,i).cornerBackgroundColor,canSelect:r,selected:i}),i&&!isEmpty(e.desc)&&(n=e.desc.title,u=e.desc.desc,o=!isEmpty(e.desc.title)||!isEmpty(e.desc.desc),p=e.desc.url,c=!isEmpty(e.desc.url))}),t={title:s.title,showDesc:o,descTitle:n,desc:u,targetUrl:p,enableClick:c,items:a},i.push(t))}),i}var f={},n=function(e,t,i,r){if(!(isEmpty(e.skuCore)||isEmpty(e.skuCore.sku2info)||isEmpty(i)||isEmpty(r))){e=t.id_biz_property.skuId,t={};try{t=f[e][i]}catch(e){}if(!isEmpty(t)){var s=t.checkedSelectItems;if(!isEmpty(s))for(var a=0,o=s.length;a<o;a++)if(r===s[a])return s.splice(a,1),!0}}return!1},u=function(e,t,i,r,s){if(!(isEmpty(e.skuCore)||isEmpty(e.skuCore.sku2info)||isEmpty(i)||isEmpty(r))){var a=t.id_biz_property.skuId,t=e.skuCore.sku2info[a];if(!isEmpty(t)){var o=t.eachSkuProms;if(!isEmpty(o))for(var n=0,u=o.length;n<u;n++){var p=o[n];if(i===p.groupId){var c={};try{c=f[a][i]}catch(e){}if(isEmpty(c)&&(c={}),isEmpty(p.items))return;var m=f[a];if(isEmpty(m)&&(f[a]=m={}),isTrue(p.mustSelect)&&1===p.items.length)m[i]=k(c,p.items[0],!0,p.selectType,s);else for(var l=0,d=p.items.length;l<d;l++){var y=p.items[l];r===y.eachId&&(m[i]=k(c,y,!1,p.selectType,s))}}}}}},k=function(e,i,t,r,s){var a,o=[],n=[],u=[];try{o=e.candidateSelectItems}catch(e){}try{n=e.fixedSelectItems}catch(e){}try{u=e.checkedSelectItems}catch(e){}if(isEmpty(o)&&(o=[]),isEmpty(n)&&(n=[]),isEmpty(u)&&(u=[]),isEmpty(o)){var o=[],p={eachId:i.eachId,isComplete:isTrue(i.isComplete),name:i.name};isEmpty(s)||(p.isComplete=isTrue(s.isComplete),p.params=s.params),o.push(p)}else{for(var c=!1,m=0,l=o.length;m<l;m++){var d=o[m];if(d.eachId===i.eachId){isEmpty(s)||(d.isComplete=isTrue(s.isComplete),d.params=s.params),c=!0;break}}c||(p={eachId:i.eachId,isComplete:isTrue(i.isComplete),name:i.name},isEmpty(s)||(p.isComplete=isTrue(s.isComplete),p.params=s.params),o.push(p))}return isTrue(t)?(n=[i.eachId],u=[]):"multiple"===r?(a=!(n=[]),u.forEach(function(e,t){i.eachId===e&&(a=!0)}),a||u.push(i.eachId)):(n=[],u=[i.eachId]),e={candidateSelectItems:o,fixedSelectItems:n,checkedSelectItems:u}},p=function(r,s){if(isEmpty(r.skuCore)||isEmpty(r.skuCore.sku2info))return!1;var e=s.id_biz_property.skuId,t={};try{t=f[e]}catch(e){}return!!isEmpty(t)&&(t=r.skuCore.sku2info[e],!isEmpty(t))&&(e=t.eachSkuProms,!isEmpty(e))&&void e.forEach(function(i,e){isEmpty(i.items)||(isTrue(i.mustSelect)&&1===i.items.length?u(r,s,i.groupId,i.items[0].eachId):i.items.forEach(function(e,t){isTrue(e.autoSelect)&&u(r,s,i.groupId,e.eachId)}))})},c=function(e,t){return"id_biz_normal_select"},d=function(e,t,i,r){if(!(isEmpty(e.skuCore)||isEmpty(e.skuCore.sku2info)||isEmpty(i)||isEmpty(r))){e={};try{e=f[t.id_biz_property.skuId][i]}catch(e){}if(!isEmpty(e)){var s=e.fixedSelectItems;if(!isEmpty(s))for(var a=0,o=s.length;a<o;a++)if(r===s[a])return!0}}return!1},y=function(e,t,i,r){if(!(isEmpty(e.skuCore)||isEmpty(e.skuCore.sku2info)||isEmpty(i)||isEmpty(r))){e={};try{e=f[t.id_biz_property.skuId][i]}catch(e){}if(!isEmpty(e)){var s=e.fixedSelectItems,a=e.checkedSelectItems;if(!isEmpty(s)||!isEmpty(a)){for(var o=0,n=s.length;o<n;o++)if(r===s[o])return!0;for(var u=0,p=a.length;u<p;u++)if(r===a[u])return!0}}}return!1};return function(){return{initContext:e,getComponentId:c,saveStoredData:t,getDisplayData:i}}}(),function(){function e(e,t){}function t(e,t){return"id_biz_atmosphere"}function i(e,t){return{}}function r(e,t){var e=e.originalData,i=isEmpty(i=e)||isEmpty(i.skuCore)||(i=i.skuCore.countDownInfo,isEmpty(i))?null:((r="0")==i.status?r=i.startTime:"1"==i.status&&(r=i.futureTime),{text:i.text,color:i.color,timerTextColor:i.timerTextColor,timerBackgroundColor:i.timerBackgroundColor,bgColor:i.backgroundColor,showCountdown:i.showCountdown,futureTime:r}),r={};return isEmpty(e.skuCore)||isEmpty(e.skuCore.atmosphere)||(r=e.skuCore.atmosphere),isEmpty(i)||(r.countDownInfo=i),r}return function(){return{initContext:e,getComponentId:t,saveStoredData:i,getDisplayData:r}}}(),function(){function e(e,t){}function t(e,t){return"id_biz_head"}function i(e,t){return{selectedTextMap:y}}function r(e,t){c=e.originalData,u=e.extInput,o=f(c,s=e.storedData),n=k(c,s),a=N(c,s),i=E(c,s),r=h(c,s),l=g(c,s),u=P(c,s,u),d=x(c,s),p=B(c,s),i={simpleMode:s.id_biz_property.bigImageMode,imageInfoMap:o,mainPic:n.mainPic,mainDesc:n.mainDesc,mainPVId:n.mainPVId,stockText:i,labelInfo:a,priceText:u.priceText,priceTitle:u.priceTitle,subPriceText:u.subPriceText,subPriceTail:u.subPriceTail,subPriceTitle:u.subPriceTitle,currencySymbol:u.priceSymbol,selText:r.finalText,desc:l,extraProm:d,multiDiscountInfo:p,firstPrice:A("",u.priceTitle,u.priceSymbol,u.priceText),secondPrice:A("",u.subPriceTitle,u.priceSymbol,u.subPriceText,u.subPriceTail)},isEmpty(c.skuCore)||isEmpty(c.skuCore.abSwitch)||!isTrue(c.skuCore.abSwitch.enableShowPic)?i.newHeader="false":i.newHeader="true",!isEmpty(c.feature)&&isTrue(c.feature.isDonateItem)&&(a=F(c),i={simpleMode:s.id_biz_property.bigImageMode,imageInfoMap:o,mainPic:n.mainPic,mainDesc:n.mainDesc,mainPVId:n.mainPVId,priceText:u.priceText,priceTitle:u.priceTitle,donateTitle:a,newHeader:"false"}),y=r;var i,r,s,a,o,n,u,p,c,m,l=i,d=e.originalData;return isEmpty(d.feature)||isEmpty(d.feature.customSkuImage)||!isTrue(d.feature.customSkuImage)||e.storedData.id_biz_property.bigImageMode||(p=d,c=e.storedData,m=[],isEmpty(p.item)||isEmpty(p.item.images)||m.push({url:p.item.images[0],desc:""}),s=isEmpty(p.skuBase)||isEmpty(p.skuBase.skus||isEmpty(p.skuBase.props))||(p=M(p,c),isEmpty(p)||isEmpty(p.images)||p.images.forEach(function(e,t){!isEmpty(e)&&0<e.length&&m.push({url:e,desc:""})}),1==m.length)?null:m,isEmpty(s))||(l.imageInfoMap=s,o=d,n=e.storedData,u={mainPic:""},isEmpty(o.item)||isEmpty(o.item.images)||(u.mainPic=o.item.images[0]),o=M(o,n),isEmpty(o)||isEmpty(o.images)||(n=o.images[0],isEmpty(n))||(u.mainPic=n),a=u,l.mainPic=a.mainPic),l}var y={},o=function(e,t,i){if(isEmpty(i)||isEmpty(t.descartesMap))return!1;var r,s=[],a=i.split(":")[0];for(r in t.id_biz_property.checkedPropValue)a!==r&&s.push(r+":"+t.id_biz_property.checkedPropValue[r]);s.push(i);i=ascSortAndAppendPVIdList(s);return!isEmpty(i)&&!0===t.descartesMap[i]},n=function(e,t,i){if(isEmpty(i)||isEmpty(t.outOfStockDescartesMap))return!1;var r,s=[],a=i.split(":")[0];for(r in t.id_biz_property.checkedPropValue)a!==r&&s.push(r+":"+t.id_biz_property.checkedPropValue[r]);s.push(i);i=ascSortAndAppendPVIdList(s);return!isEmpty(i)&&!0===t.outOfStockDescartesMap[i]},d=function(r,s){var a;if(!isEmpty(r.skuBase)&&!isEmpty(r.skuBase.props))return a={},r.skuBase.props.forEach(function(e,t){var i=e.pid;isEmpty(e.values)||e.values.forEach(function(e,t){e=i+":"+e.vid;o(r,s,e)||n(r,s,e)||(a[e]=!0)})}),a},u=function(e,t){return!isEmpty(e)&&!(isEmpty(e.skuImages)||!isArray(e.skuImages)||e.skuImages.length<1)&&e.skuImages[0]||t},s=function(e){if(!isEmpty(e.skuBase)&&!isEmpty(e.skuBase.skus))for(var t=0,i=e.skuBase.skus.length;t<i;t++){var r=e.skuBase.skus[t];if(!isEmpty(r.skuImages)&&isArray(r.skuImages)&&0<r.skuImages.length&&!isEmpty(r.skuImages[0]))return!0}return!1},a=function(i,r,s){var a=[];return i.skuBase.skus.forEach(function(e,t){e={url:u(e,s),desc:I(i,e.skuId),pvId:e.skuId,isSkuId:!0,canSelect:!0,hasPic:!0,selected:r.id_biz_property.skuId===e.skuId};a.push(e)}),a},p=function(e,t,i){for(var r=[],s=d(e,t),a=0,o=e.skuBase.props.length;a<o;a++){var n=e.skuBase.props[a],u=!1;if(!isEmpty(n)&&!isEmpty(n.values))for(var p=0,c=n.values.length;p<c;p++){var m=n.values[p];if(!isEmpty(m)&&!isEmpty(m.image)){u=!0;break}}if(u){var l=n.pid;n.values.forEach(function(e,t){e={url:isEmpty(e.image)?i:e.image,desc:e.name,pvId:l+":"+e.vid,viewId:"property_"+a,hasPic:!isEmpty(e.image)};s[e.pvId]?e.canSelect=!1:e.canSelect=!0,e.selected=!1,r.push(e)});break}}return r},f=function(e,t){var i=[],r=!1;return isEmpty(e.skuCore)||isEmpty(e.skuCore.abSwitch)||!isTrue(e.skuCore.abSwitch.enableShowPic)||(r=!0),t.id_biz_property.bigImageMode&&!isTrue(r)||isEmpty(e.item)||isEmpty(e.item.images)||i.push({url:e.item.images[0],hasPic:!0,desc:"商品款式"}),isEmpty(e.skuBase)||isEmpty(e.skuBase.skus)||isEmpty(e.skuBase.props)||(r=isEmpty(i[0])?"":i[0].url,isTrue(t.id_biz_property.isPropHasImage)?p(e,t,r).forEach(function(e,t){i.push(e)}):s(e)&&(isEmpty(i[0])||(i=[]).push({url:r,desc:"商品款式",pvId:"0",isSkuId:!0,canSelect:!1,hasPic:!0,selected:"0"===t.id_biz_property.skuId}),a(e,t,r).forEach(function(e,t){i.push(e)}))),i},l=function(e){for(var t=0,i=e.values.length;t<i;t++){var r=e.values[t];if(!isEmpty(r.image))return!0}return!1},c=function(e,t,i){if(!isEmpty(e.skuBase)&&!isEmpty(e.skuBase.skus))for(var r=t.id_biz_property.skuId,s=0,a=e.skuBase.skus.length;s<a;s++){var o,n,u=e.skuBase.skus[s];if(u.skuId===r)return o={hasPic:!1},n=i,!isEmpty(u.skuImages)&&isArray(u.skuImages)&&0<u.skuImages.length&&!isEmpty(u.skuImages[0])&&(n=u.skuImages[0],o.hasPic=!0),o.mainPic=n,o.mainDesc=I(e,r)||"商品款式",o.mainPVId=r||"0",o}return null},m=function(e,t,i){for(var r in t.id_biz_property.checkedPropValue){if(isEmpty(e.skuBase)||isEmpty(e.skuBase.props))break;for(var s=0,a=e.skuBase.props.length;s<a;s++){var o=e.skuBase.props[s];if(r===o.pid&&!isEmpty(o.values))for(var n=l(o),u=0,p=o.values.length;u<p;u++){var c,m=o.values[u];if(n&&t.id_biz_property.checkedPropValue[r]===m.vid)return c={},isEmpty(m.image)?isEmpty(e.item)||isEmpty(e.item.images)||(c.mainPic=e.item.images[0],c.hasPic=!1):(c.mainPic=m.image,c.hasPic=!0),c.mainDesc=m.name,c.mainPVId=o.pid+":"+m.vid,c}}}return null},k=function(e,t){var i=null,r="";return isEmpty(e.item)||isEmpty(e.item.images)||(r=e.item.images[0]||r),isTrue(t.id_biz_property.isPropHasImage)?i=m(e,t,r):s(e)&&(i=c(e,t,r)),isEmpty(i)&&(i={mainPic:"",mainDesc:"",mainPVId:""},isEmpty(e.item)||isEmpty(e.item.images)||(i.mainPic=e.item.images[0],i.mainDesc="商品款式",i.mainPVId="")),i},E=function(e,t){var i;return isEmpty(e.skuCore)||isEmpty(e.skuCore.skuItem)||!isTrue(e.skuCore.skuItem.hideQuantity)?(i=_(e,t),isEmpty(i)?"库存"+v(e,t)+"件":i):""},v=function(e,t){return isEmpty(e.skuCore)||isEmpty(e.skuCore.sku2info)||isEmpty(e.skuCore.sku2info[t.id_biz_property.skuId])||isEmpty(e.skuCore.sku2info[t.id_biz_property.skuId].quantity)?0:parseInt(e.skuCore.sku2info[t.id_biz_property.skuId].quantity)},_=function(e,t){return isEmpty(e.skuCore)||isEmpty(e.skuCore.sku2info)||isEmpty(e.skuCore.sku2info[t.id_biz_property.skuId])||isEmpty(e.skuCore.sku2info[t.id_biz_property.skuId].quantityText)?"":e.skuCore.sku2info[t.id_biz_property.skuId].quantityText},b=function(e,t){var s;return isEmpty(e.services)||isEmpty(e.services.allServices)?{}:(s={},e.services.allServices.forEach(function(e,t){var i,r=e.uniqueServices;isEmpty(r)||(i={},r.forEach(function(e,t){i[e.uniqueId]=e}),e.children=i),s[e.serviceId]=e}),s)},I=function(e,t){var i="";return C(e,t).forEach(function(e,t){i+=' "'+e+'"'}),i},C=function(e,t){if(isEmpty(t))return[];if(isEmpty(e.skuBase)||isEmpty(e.skuBase.skus))return[];if(isEmpty(e.skuBase)||isEmpty(e.skuBase.props))return[];for(var i={},r=0,s=e.skuBase.skus.length;r<s;r++){var a=e.skuBase.skus[r];if(t===a.skuId&&!isEmpty(a.propPath)){a.propPath.split(";").forEach(function(e,t){e=e.split(":");i[e[0]]=e[1]});break}}var o=[];return e.skuBase.props.forEach(function(e,t){var r=i[e.pid];isEmpty(e.values)||e.values.forEach(function(e,t){var i;e.vid===r&&(i=isEmpty(e.alias)?e.name:e.alias,isEmpty(e.colorSeries)||isEmpty(e.colorMaterial)?isEmpty(e.colorSeries)?isEmpty(e.colorMaterial)||(i+="(质地为"+e.colorMaterial+")"):i+="(色系为"+e.colorSeries+")":i+="(色系为"+e.colorSeries+", 质地为)"+e.colorMaterial,o.push(i))})}),o},h=function(e,i){var t={selectedSkuId:!1,finalText:"",propTextList:[],serviceTextList:[]};if(!isEmpty(e.skuBase)&&!isEmpty(e.skuBase.props)){var r="",s=[];if(isEmpty(i.id_biz_property.skuId)||"0"===i.id_biz_property.skuId)r="请选择",e.skuBase.props.forEach(function(e,t){i.id_biz_property.checkedPropValue.hasOwnProperty(e.pid)||(r+=" "+e.name,s.push(""+e.name))});else{t.selectedSkuId=!0;var a=C(e,i.id_biz_property.skuId),r="已选:",o=(a.forEach(function(e,t){r+=' "'+e+'"',s.push(e)}),[]),n="";if(!isEmpty(i.id_biz_service)){var u=b(e,i);if(!isEmpty(i.id_biz_service.fixedServiceUnique)){var p,c=i.id_biz_service.fixedServiceUnique;for(p in c){var m=u[p].name,l=(n+=" "+u[p].name,c[p]);"0"!==l&&(n+=":"+u[p].children[l].name,m+=":"+u[p].children[l].name),o.push(m)}}if(!isEmpty(i.id_biz_service.checkedServiceUnique)){var d,y=i.id_biz_service.checkedServiceUnique;for(d in y){var m=u[d].name,f=(n+=" "+u[d].name,y[d]);"0"!==f&&(n+=":"+u[d].children[f].name,m+=":"+u[d].children[f].name),o.push(m)}}}t.serviceTextList=o,r+=n}t.propTextList=s,t.finalText=r}return t},g=function(e,t){if(isEmpty(e.skuCore)||isEmpty(e.skuCore.skuItem)||!isTrue(e.skuCore.skuItem.showAddress)&&!isTrue(e.skuCore.skuItem.showAddressTaobao)){if(isEmpty(e.skuCore)||isEmpty(e.skuCore.sku2info))return"";e=e.skuCore.sku2info[t.id_biz_property.skuId];if(!isEmpty(e))return e.logisticsTime||""}return""},S=function(e,t){var s;return isEmpty(e.services)||isEmpty(e.services.sku2serviceMap)||(s={},e=e.services.sku2serviceMap[t.id_biz_property.skuId],isEmpty(e))||!isArray(e)?{}:(e.forEach(function(e,t){var i,r=e.serviceSkuPrices;isEmpty(r)||(i={},r.forEach(function(e,t){i[e.uniqueId]=e}),e.children=i),s[e.serviceId]=e}),s)},D=function(e,t){var i=0;if(!isEmpty(e.services)&&!isEmpty(e.services.sku2StandardServiceV2)){var r=e.services.sku2StandardServiceV2[t.id_biz_property.skuId];for(o in t.id_biz_service.fixedServiceUnique){var s=t.id_biz_service.fixedServiceUnique[o];i+=parseNumberWithDefaultZero(r[o+":"+s].price/100)}for(n in t.id_biz_service.checkedServiceUnique){var a=t.id_biz_service.checkedServiceUnique[n];i+=parseNumberWithDefaultZero(r[n+":"+a].price/100)}}else{var o,n,u=S(e,t);for(o in t.id_biz_service.fixedServiceUnique){s=t.id_biz_service.fixedServiceUnique[o];i+=parseNumberWithDefaultZero("0"===s?u[o].price/100:u[o].children[s].price/100)}for(n in t.id_biz_service.checkedServiceUnique){a=t.id_biz_service.checkedServiceUnique[n];i+=parseNumberWithDefaultZero("0"===a?u[n].price/100:u[n].children[a].price/100)}}return i},z=function(e,t,i){var r,s,a,o=0;return isEmpty(e.skuCore)||isEmpty(e.skuCore.sku2info)||(i=getBottomBarMode(e,t,i),r=e.skuCore.sku2info,s={},isEmpty(r[t.id_biz_property.skuId])||(s=r[t.id_biz_property.skuId].price),a=null,"BUYNOW"===i?isEmpty(r[t.id_biz_property.skuId])||(a=r[t.id_biz_property.skuId].subPrice):(isEmpty(r[t.id_biz_property.skuId])||isEmpty(r[t.id_biz_property.skuId].cart)||(a=r[t.id_biz_property.skuId].cart.subPrice),isEmpty(a)&&!isEmpty(r[t.id_biz_property.skuId])&&(a=r[t.id_biz_property.skuId].subPrice)),isEmpty(a)?isEmpty(s)||(o=s.priceMoney/100):o=a.priceMoney/100,isNaN(o)&&(o=0),o+=D(e,t)),o},T=function(e,t){return!hasSku(e,t)||"0"!==t.id_biz_property.skuId},P=function(e,t,i){var r,s,a,o,n,u={priceText:"",priceTitle:"",priceSymbol:"",subPriceText:"",subPriceTitle:"",subPriceSymbol:""};return isEmpty(e.skuCore)||isEmpty(e.skuCore.sku2info)||(s=getBottomBarMode(e,t,i),n=e.skuCore.sku2info,a={},isEmpty(n[t.id_biz_property.skuId])||(a=n[t.id_biz_property.skuId].price),r=null,"BUYNOW"===s?isEmpty(n[t.id_biz_property.skuId])||(r=n[t.id_biz_property.skuId].subPrice):(isEmpty(n[t.id_biz_property.skuId])||isEmpty(n[t.id_biz_property.skuId].cart)||(r=n[t.id_biz_property.skuId].cart.subPrice),isEmpty(r)&&!isEmpty(n[t.id_biz_property.skuId])&&(r=n[t.id_biz_property.skuId].subPrice)),s=z(e,t,i),isEmpty(a)||(n=a.priceTitle||"",i=a.priceChar||"￥",o="",o=T(e,t)&&(isEmpty(r)||isEmpty(r.priceText))?s.toFixed(2):a.priceText||"",u.priceText=o,u.priceTitle=n,u.priceSymbol=i,isEmpty(u.priceText)&&(u.priceSymbol="")),isEmpty(r))||(a=r.priceTitle||"",o=r.priceChar||"￥",n="",n=!T(e,t)||isEmpty(r)?r.priceText||"":s.toFixed(2),i=!isEmpty(e.skuCore)&&!isEmpty(e.skuCore.abSwitch)&&isTrue(e.skuCore.abSwitch.enableShowPic),isTrue(i)&&!isEmpty(n)&&isString(n)&&1<=n.length?"起"===n.substr(n.length-1,n.length)?(u.subPriceText=n.substr(0,n.length-1),u.subPriceTail="起"):u.subPriceText=n:u.subPriceText=o+n,u.subPriceTitle=a,u.subPriceSymbol=o,isEmpty(u.subPriceText)&&(u.subPriceSymbol="")),u},x=function(e,t){var i="";return isEmpty(e.skuCore)||isEmpty(e.skuCore.sku2info)||(t=e.skuCore.sku2info[t.id_biz_property.skuId],isEmpty(t))||(i=t.extraProm),(i=!isEmpty(i)||isEmpty(e.skuCore)||isEmpty(e.skuCore.skuItem)?i:e.skuCore.skuItem.extraProm)||""},B=function(e,t){var i="";return(i=isEmpty(e.skuCore)||isEmpty(e.skuCore.sku2info)||(e=e.skuCore.sku2info[t.id_biz_property.skuId],isEmpty(e))?i:e.multiDiscountInfo)||""},N=function(e,t){var i=[];if(isEmpty(e.skuCore))return null;var r=e.skuCore.skuLabels;if(isEmpty(r))return null;if(!r.showLabel)return null;r=e.rate;if(isEmpty(r))return null;var s=r.keywords;if(!isEmpty(s)){if(s.length<2)return null;for(var a=0,o=Math.min(s.length,3);a<o;a++){var n=s[a],n=n.word+"("+n.count+")";i.push({name:n,color:"#ff5000"})}}return i},F=function(e){return isEmpty(e.feature)||!isTrue(e.feature.isDonateItem)||isEmpty(e.item)||isEmpty(e.item.title)?"":e.item.title},A=function(){for(var e="",t=0,i=arguments.length;t<i;t++)isEmpty(arguments[t])||(e+=arguments[t]);return e},M=function(e,t){var i={},r=t.id_biz_property.skuId;if(isEmpty(r)||"0"==r){var s=t.id_biz_property.checkedPropValue;if(!isEmpty(s)){var a,o=[];for(a in s)o.push(a+":"+s[a]);if(!isEmpty(e.skuBase)&&!isEmpty(e.skuBase.skus))for(var n=0,u=e.skuBase.skus.length;n<u;n++){var p=(d=e.skuBase.skus[n]).propPath;if(!isEmpty(p)){for(var c=!0,m=0,l=o.length;m<l;m++)if(-1==p.indexOf(o[m])){c=!1;break}if(c){i=d;break}}}}}else if(!isEmpty(e.skuBase)&&!isEmpty(e.skuBase.skus))for(var d,n=0,u=e.skuBase.skus.length;n<u;n++)if(r==(d=e.skuBase.skus[n]).skuId){i=d;break}return i};return function(){return{initContext:e,getComponentId:t,saveStoredData:i,getDisplayData:r}}}(),function(){function e(e,t){}function t(e,t){return"id_biz_strategic"}function i(e,t){return{}}function s(e,t){var i={};if(isEmpty(e.consumerProtection)||isEmpty(e.consumerProtection.items))return{};for(var r=[],s=0;s<e.consumerProtection.items.length;s++){var a=e.consumerProtection.items[s];if(r.push(a.title),2<=s)break}return i.title={text:"服务保障"},i.desc={text:r.join("·")},i.icon="덊",i}function r(e,t){var i,r=e.originalData;return isEmpty(r.skuCore)||isEmpty(r.skuCore.abSwitch)||!isTrue(r.skuCore.abSwitch.enableShowProtection)?{}:(i=function(e){var t={};if(isEmpty(e.rate)||isEmpty(e.rate.keywords)||(i=e.rate.keywords[0]),isEmpty(i))return{};t.title={text:i.count+"人评价“"+i.word+"”"};var i=e.rate.totalCount;return 1e4<parseInt(i)&&(i="1万+"),t.desc={text:"全部("+i+")"},t.url="https://h5.m.taobao.com/ratedisplay/itemratelist.htm",t.icon="렺",t.rightIcon="큚",t}(r,e.storeData),isEmpty(i)?(r=s(r,e.storeData),isEmpty(s)?{}:r):i)}return function(){return{initContext:e,getComponentId:t,saveStoredData:i,getDisplayData:r}}}(),function(){function e(e,t){}function t(e,t){return"id_biz_car_model"}function i(e,t){return{}}function r(e,t){var e=e.originalData,i={};return i=isEmpty(e.skuCore)||isEmpty(e.skuCore.skuItem)||isEmpty(e.skuCore.skuItem.carModel)?i:e.skuCore.skuItem.carModel}return function(){return{initContext:e,getComponentId:t,saveStoredData:i,getDisplayData:r}}}(),function(){function e(e,t){y={}}function t(e,t){return{checkedStoreInfo:y}}function i(e,t){var i,r,s=e.originalData,a={};return isEmpty(s.skuCore)||isEmpty(s.skuCore.skuItem)||isEmpty(s.skuCore.skuItem.storeInfo)||(function(e,t){e=e.storedData[o(e,t)];isEmpty(e)||(y=e.checkedStoreInfo||{index:"0"})}(e,t),e.originalData,"change_store_info"===(t=e.opData).type&&!isEmpty(t.extraParams)&&isArray(t.extraParams)&&(t=t.extraParams[0],isEmpty(t.index)?y.index="0":y.index=t.index),"store_update"!==(t=e.opData).type||isEmpty(t.eventData)||isEmpty(t.eventData.storeInfo)||(i=t.eventData.storeInfo,(r={}).couponAmount=i.couponAmount,r.price=i.price,r.storeId=i.storeId,r.storeName=i.storeName,isEmpty(t.eventData.fulfillType)||(r.fulfillType=t.eventData.fulfillType),y.storeInfo=r),a=function(e,t){var i=e.skuCore.skuItem.storeInfo,r={};if(isEmpty(i.blockTitle)||(r.blockTitle=i.blockTitle),isEmpty(y)&&(y.index="0"),y.tradeTip="",!isEmpty(i.blocks)){for(var s=[],a=0,o=i.blocks.length;a<o;a++){var n,u,p,c,m,l,d=i.blocks[a];a==parseInt(y.index)?(s.push({title:d.title,titleColor:"#fc511e",borderColor:"#fc511e",backgroundColor:"#FFF9F9",index:a+""}),isEmpty(d.services)||isEmpty(d.services.name)||(r.subTitle="服务类型",r.subBorderColor="#fc511e",r.subBackgroundColor="#FFF9F9",r.subDesc=d.services.name,r.subTextColor="#fc511e"),isEmpty(d.storeInfo)?y.tradeParams={}:(n=d.storeInfo,u=!isEmpty(d.services)&&d.services.fulfillType||"",isEmpty(y.storeInfo)||(n=y.storeInfo,isEmpty(y.storeInfo.fulfillType))||(u=y.storeInfo.fulfillType),hasSku(e,t)&&"0"===t.id_biz_property.skuId?(m="请选择商品属性!",p=t.id_biz_property.unCheckedPropNames,isEmpty(p)||(m="请选择 "+(m=p.join(" "))),r.toast=m):isEmpty(d.storeList)||(p={itemList:[{itemId:e.item.itemId,buyNum:t.id_biz_quantity.quantity.currentNum,skuId:t.id_biz_property.skuId,serviceCode:isEmpty(d.services)?"":d.services.serviceCode}],city:{cityCode:isEmpty(e.delivery)?"":e.delivery.areaId},multiWays:isEmpty(d.services)?"":d.services.multiWays,fulfillType:u},r.storeList=d.storeList+"&itemService="+encodeURIComponent(JSON.stringify(p)),isEmpty(n.storeId))||(r.storeList=r.storeList+"&storeId="+n.storeId),isEmpty(n.price)||(c=!isEmpty(n.couponAmount)&&0<parseFloat(n.couponAmount)?"服务价格￥"+(parseFloat(n.price-n.couponAmount)/100).toFixed(2)+"(商家已补贴￥"+(parseFloat(n.couponAmount)/100).toFixed(2)+")":"服务价格￥"+(parseFloat(n.price)/100).toFixed(2)),m="请选择门店",isEmpty(n.storeName)?y.tradeTip=m:m=n.storeName,r.store={title:d.storeInfo.title,icon:"&#xc08d;",storeName:m,change:"更换",tips:c},isEmpty(d.services)||isEmpty(d.services.effectiveDays)||isEmpty(n.storeName)||(l='<font color="#333333"> 请在购买 </font><font color="#FF5000">'+d.services.effectiveDays+'</font> <font color="#333333"> 天内到店安装 </font>',r.store.effectiveDays=l),l=[{itemServiceFrom:!isEmpty(d.services)&&d.services.itemServiceFrom||"",itemServiceId:{serviceId:!isEmpty(d.services)&&d.services.serviceId||"",serviceSkuId:0},storeService:{date:"2015-05-10 12:00",storeId:n.storeId,fulfillType:u}}],y.tradeParams={serviceId:(!isEmpty(d.services)&&d.services.serviceId||"")+"|0",areaId:!isEmpty(e.delivery)&&e.delivery.areaId||"",itemSelectedServices:JSON.stringify(l)})):s.push({title:d.title,titleColor:"#333333",borderColor:"#ffffff",backgroundColor:"#f5f5f5",index:a+""})}isEmpty(s)||(r.blocks=s)}return r}(s,e.storedData)),a}var y={},o=function(e,t){return"id_biz_store"};return function(){return{initContext:e,getComponentId:o,saveStoredData:t,getDisplayData:i}}}(),function(){function e(e,t){}function t(e,t){return"id_biz_bottom_tips"}function i(e,t){return{}}function r(e,t){return i=e.originalData,r={},s=u(e=e.storedData),a=n(i,e),isEmpty(s)&&!isEmpty(a)&&(s=a.skuPromTip),!isEmpty(i.skuCore)&&!isEmpty(i.skuCore.abSwitch)&&isTrue(i.skuCore.abSwitch.enableShowPic)&&isEmpty(s)&&(s=o(i,e)),!isEmpty(s)||isEmpty(i.skuCore)||isEmpty(i.skuCore.sku2info)||(a=i.skuCore.sku2info[e.id_biz_property.skuId],isEmpty(a))||isEmpty(a.skuPromTip)||(s=a.skuPromTip),r.tips=s,r;var i,r,s,a}var o=function(e,t){var i,r;return isEmpty(e.skuCore)||isEmpty(e.skuCore.skuItem)||!isTrue(e.skuCore.skuItem.showAddress)&&!isTrue(e.skuCore.skuItem.showAddressTaobao)?!isEmpty(e.skuCore)&&!isEmpty(e.skuCore.sku2info)&&(r=e.skuCore.sku2info[t.id_biz_property.skuId],!isEmpty(r))&&r.logisticsTime||"":isEmpty(e.skuCore)||isEmpty(e.skuCore.sku2info)||(i="",r=e.skuCore.sku2info[t.id_biz_property.skuId],isEmpty(r)||(i=r.logisticsTime),isEmpty(i))?"":i},n=function(e,t){var i=[];isEmpty(e.skuCore)||isEmpty(e.skuCore.skuBuy)||isEmpty(e.skuCore.skuBuy.buyPattern)||isEmpty(e.skuCore.skuBuy.buyPattern.type)||(i=e.skuCore.skuBuy.buyPattern.type);for(var r=0,s=(i=isEmpty(e.skuCore)||isEmpty(e.skuCore.skuBuy)||isEmpty(e.skuCore.skuBuy.skuPattern)||isEmpty(e.skuCore.skuBuy.skuPattern.type)?i:e.skuCore.skuBuy.skuPattern.type).length;r<s;r++){var a=i[r];if(t.id_biz_buy_method.method===a.bizId)return a}return{}},u=function(e){switch(e.id_biz_bottom.bottomDisplayMode){case"REPLENISH":case"REPLENISH_AND_FINDSIMILAR":case"REPLENISH_NOCLICK":case"REPLENISHNOCLICK_AND_FINDSIMILAR":case"FINDSIMILAR":return"当前款式暂时缺货";default:return null}};return function(){return{initContext:e,getComponentId:t,saveStoredData:i,getDisplayData:r}}}(),function(){function e(e,t){e.originalData,K={}}function t(e,t){return{replenishedMap:K,bottomDisplayMode:G}}function i(e,t){return function(e,t){e=e.storedData[r(e,t)];isEmpty(e)||(K=e.replenishedMap||{})}(e,t),e.originalData,"update_replenish"!==(t=e.opData).type||isEmpty(t.eventData)||isEmpty(t.eventData.skuId)||(K[t.eventData.skuId]=!0),function(e,t,i){var w,r=fe(e,t,i),s="",a="";for(w in t.id_biz_installment.checkedInstallment)var O=w.split(":"),s=O[0],a=O[1];j(e,t)&&(a=s="");var o="",n=(isEmpty(e.delivery)||(o=e.delivery.areaId),isEmpty(e.item)?"":e.item.itemId),q=t.id_biz_property.skuId,u=t.id_biz_quantity.quantity.currentNum,p=u,c=Z(e,t),m=(!isEmpty(c)||isEmpty(t.id_biz_store)||isEmpty(t.id_biz_store.checkedStoreInfo)||isEmpty(t.id_biz_store.checkedStoreInfo.tradeParams)||(c=t.id_biz_store.checkedStoreInfo.tradeParams.serviceId),ee(e,t)),l=!isEmpty(n)&&Q(e,t)&&isTrue(m.isComplete)&&X(e,t)&&te(e,t)&&ie(e,t)&&re(e,t),d="商品ID获取失败，无法继续!",y=(hasSku(e,t)&&"0"===t.id_biz_property.skuId?(f="请选择商品属性!",y=t.id_biz_property.unCheckedPropNames,d=f=isEmpty(y)?f:"请选择 "+(f=y.join(" "))):parseInt(t.id_biz_quantity.quantity.currentNum)<=0?d="请增加购买数量!":isTrue(m.isComplete)?X(e,t)?te(e,t)?isEmpty(t.id_biz_store.checkedStoreInfo.tradeTip)?isEmpty(t.id_biz_custom_service.checkedServiceUnique.checkTips)||(d=t.id_biz_custom_service.checkedServiceUnique.checkTips):d=t.id_biz_store.checkedStoreInfo.tradeTip:(d=$(e,t),d=isEmpty(d)?"请选择相关套餐!":"请选择"+d+"!"):d="请选择商品服务!":d="请完成 "+m.guidanceMsg+" 的选择",""),f=(isEmpty(e.trade)||isEmpty(e.trade.buyNowUrl)||(y=e.trade.buyNowUrl),se(e,t)),k=(y=(y=isEmpty(f)?y:f)||"https://h5.m.taobao.com/awp/base/buy.htm",""),E=!1,m=(isTrue(i.fromSendGiftButton)&&(isEmpty(e.vertical)||isEmpty(e.vertical.sendGift)||isEmpty(e.vertical.sendGift.buttonText)||isEmpty(e.vertical.sendGift.link)||(k=e.vertical.sendGift.buttonText,y=e.vertical.sendGift.link,E=!0),E||isEmpty(e.vertical)||isEmpty(e.vertical.bubble)||isEmpty(e.vertical.bubble.buttonText)||isEmpty(e.vertical.bubble.link)||(k=e.vertical.bubble.buttonText,y=e.vertical.bubble.link,E=!0)),-1===y.indexOf("?")?y+="?preBizName=taobao_sku":y+="&preBizName=taobao_sku",oe(e,t)),f=ae(e,t),v=ne(e,t),_=ue(e,t),b=!0,I=!0,C="",h="",g=!1,U=!1,S="",D="",L={},V=(!isEmpty(e.feature)&&isTrue(e.feature.promotion2019)&&(isEmpty(m.itemApplyParams)||(C="BUYNOW_COUPON"),!isEmpty(f.itemApplyParams))&&isTrue(e.feature.cartCoupon)&&(h="ADDCART_COUPON"),isEmpty(e.trade)||isTrue(e.trade.buyEnable)||(b=!1,C="UNKNOWN"),isEmpty(e.vertical)||isEmpty(e.vertical.isvCustom)||isEmpty(e.vertical.isvCustom.tradeBefor)||isEmpty(e.vertical.isvCustom.tradeBefor.pluginId)||(C="BUYNOW_ISVCUSTOM"),isEmpty(e.trade)||isTrue(e.trade.cartEnable)||(I=!1,h="UNKNOWN"),isEmpty(i.id_biz_bottom)||(D=i.id_biz_bottom.rightCustomUrl,S=i.id_biz_bottom.rightCustomText,isEmpty(D)||isEmpty(S)||(U=!0),g=b,isEmpty(i.id_biz_bottom.needSKUSelection))||"false"!==i.id_biz_bottom.needSKUSelection||(g=!0),{}),z=Y(e,t),R=(isEmpty(z)||(L.biz=z.bizId,"xyhf"!==z.bizId)||isTrue(z.creditBuyOpened)||(isEmpty(e.feature)||!isTrue(e.feature.promotion2019)||isEmpty(m.itemApplyParams)?(C="XYHF_BUYNOW",h="XYHF_ADDCART",v=z.cartBtnText||v):C="XYHF_BUYNOW_COUPON",V={requestAPIMethod:"mtop.tmall.supertry.member.qualification.open2",requestAPIVersion:"1.0",requestUsePost:!0,requestNeedWua:!0,requestParams:{bizScene:"tao_xyhf",agreementId:"6",itemId:n,skuId:q},requestSuccessKey:"xyhfbuyOpenSuccess",requestFailKey:"xyhfbuyOpenFailed"}),de(t,"buyNow")),J=(isEmpty(R)||(C="CUSTOM_ANY_BUTTON"),de(t,"addCart")),T=(isEmpty(J)||(h="CUSTOM_ANY_BUTTON"),[]),P={},x={},B="",N=!1;switch(r){case"CONFIRM":var F=null;if(isEmpty(i.id_biz_bottom)||(F=i.id_biz_bottom.comfirText),P=pe(e,t),x=ce(e,t),isNumberGreaterThan(s,0)){P.installmentPay="true",P.installmentNum=s,P.installmentRate=a,x.installmentPay="true",x.installmentNum=s,x.installmentRate=a;var A=t.id_biz_installment.checkedBankInfo.tradeParams;if(!isEmpty(A))for(var M in A)P[M]=A[M],x[M]=A[M]}p/=t.id_biz_quantity.quantity.unit,P.serviceId=c,P.divisionId=o,T.push({title:F||"确认",background:{startColor:"#ff5001",endColor:"#ff5001"},eventName:"CONFIRM",enableAction:l,enableClick:!0,desc:""});break;case"ADDCART":F=null;if(isEmpty(i.id_biz_bottom)||(F=i.id_biz_bottom.addCartText),v=v||F||"加入购物车",P=pe(e,t),isNumberGreaterThan(s,0)){P.installmentPay="true",P.installmentNum=s,P.installmentRate=a;A=t.id_biz_installment.checkedBankInfo.tradeParams;if(!isEmpty(A))for(var M in A)P[M]=A[M]}p/=t.id_biz_quantity.quantity.unit,P.serviceId=c,P.divisionId=o,T.push({title:v,background:{startColor:"#ff5001",endColor:"#ff5001"},eventName:h||"ADDCART",enableAction:l,enableClick:I,dxUserId:"add_cart",desc:"",customUrl:{targetUrl:J,exParams:JSON.stringify(P),actionType:"addCart",quantity:p+""}}),N=!0;break;case"BUYNOW":F=null;if(isEmpty(i.id_biz_bottom)||(F=i.id_biz_bottom.buyNowText),isTrue(E)&&!isEmpty(k)&&(F=k),_=_||F||"立即购买",x=ce(e,t),isNumberGreaterThan(s,0)){x.installmentPay="true",x.installmentNum=s,x.installmentRate=a;A=t.id_biz_installment.checkedBankInfo.tradeParams;if(!isEmpty(A))for(var M in A)x[M]=A[M]}T.push({title:_,background:{startColor:"#ff5001",endColor:"#ff5001"},eventName:C||"BUYNOW",enableAction:l,enableClick:b,dxUserId:"buy_now",desc:"",customUrl:{targetUrl:R,exParams:JSON.stringify(x),actionType:"buyNow",quantity:u}}),N=!0;break;case"FIND_NEW_STORE":if(x=ce(e,t),isNumberGreaterThan(s,0)){x.installmentPay="true",x.installmentNum=s,x.installmentRate=a;A=t.id_biz_installment.checkedBankInfo.tradeParams;if(!isEmpty(A))for(var M in A)x[M]=A[M]}T.push({title:e.skuCore.skuItem.storeInfo.bottomBarText,background:{startColor:"#ff5001",endColor:"#ff5001"},eventName:"CUSTOM_ANY_BUTTON",enableAction:!0,enableClick:!0,desc:"",customUrl:{targetUrl:e.skuCore.skuItem.storeInfo.bottomBarUrl,exParams:JSON.stringify({pvids:encodeURIComponent(me(t))}),actionType:"findStore",quantity:u}});break;case"REPLENISH":T.push({title:"提醒掌柜补货",background:{startColor:"#ff5001",endColor:"#ff5001"},eventName:K[t.id_biz_property.skuId]?"REPLENISHED":"REPLENISH",enableAction:!0,enableClick:!0,desc:""});break;case"REPLENISH_AND_FINDSIMILAR":T.push({title:"提醒掌柜补货",background:{startColor:"#ff9100",endColor:"#ff9100"},eventName:K[t.id_biz_property.skuId]?"REPLENISHED":"REPLENISH",enableAction:!0,enableClick:!0,desc:""}),B=le(e,t),T.push({title:"找相似",iconFont:"눪",background:{startColor:"#eb3340",endColor:"#eb3340"},eventName:"FINDSIMILAR",enableAction:!0,enableClick:!0,desc:""});break;case"REPLENISH_NOCLICK":T.push({title:"缺货",background:{startColor:"#c2c2c2",endColor:"#c2c2c2"},eventName:"NO_CLICK",enableAction:!1,enableClick:!1,desc:""});break;case"REPLENISHNOCLICK_AND_FINDSIMILAR":T.push({title:"缺货",background:{startColor:"#c2c2c2",endColor:"#c2c2c2"},eventName:"NO_CLICK",enableAction:!1,enableClick:!1,desc:""}),B=le(e,t),T.push({title:"找相似",iconFont:"눪",background:{startColor:"#eb3340",endColor:"#eb3340"},eventName:"FINDSIMILAR",enableAction:!0,enableClick:!0,desc:""});break;case"FINDSIMILAR":B=le(e,t),T.push({title:"找相似",iconFont:"눪",background:{startColor:"#eb3340",endColor:"#eb3340"},eventName:"FINDSIMILAR",enableAction:!0,enableClick:!0,desc:""});break;default:if(P=pe(e,t),x=ce(e,t),isNumberGreaterThan(s,0)){P.installmentPay="true",P.installmentNum=s,P.installmentRate=a,x.installmentPay="true",x.installmentNum=s,x.installmentRate=a;A=t.id_biz_installment.checkedBankInfo.tradeParams;if(!isEmpty(A))for(var M in A)P[M]=A[M],x[M]=A[M]}p/=t.id_biz_quantity.quantity.unit,P.serviceId=c,P.divisionId=o,r="ADDCART_AND_BUYNOW",T.push({title:v||"加入购物车",background:{startColor:"#ff9100",endColor:"#ff9100"},eventName:h||"ADDCART",enableAction:l,enableClick:I,dxUserId:"add_cart",desc:"",customUrl:{targetUrl:J,exParams:JSON.stringify(P),actionType:"addCart",quantity:p+""}});N=!0,F="#ff5001";isEmpty(e.vertical)||isEmpty(e.vertical.presale)||(F="#7555f4"),isTrue(U)?T.push({title:S,background:{startColor:F,endColor:F},eventName:"CUSTOMRIGHT",enableAction:!0,enableClick:g,desc:""}):(T.push({title:_||"立即购买",background:{startColor:F,endColor:F},eventName:C||"BUYNOW",enableAction:l,enableClick:b,dxUserId:"buy_now",desc:"",customUrl:{targetUrl:R,exParams:JSON.stringify(x),actionType:"buyNow",quantity:u}}),N=!0)}z={};if(!(isEmpty(e.vertical)||isEmpty(e.vertical.isvCustom)||isEmpty(e.vertical.isvCustom.tradeBefor)||isEmpty(e.vertical.isvCustom.tradeBefor.pluginId))){isEmpty(e.seller)||isEmpty(e.seller.sellerNick)||(x.sellerNick=e.seller.sellerNick);var W,H=e.vertical.isvCustom.tradeBefor.params;for(W in H)x.key=H.key;z={pluginId:e.vertical.isvCustom.tradeBefor.pluginId,pluginParams:JSON.stringify(x)}}return t.id_biz_first_exe_holder.downgrade&&(N=!1),{bottomMode:G=r,itemId:n,skuId:q,quantity:u,cartQuantity:p,items:T,verificationTips:d,inputMode:getBottomBarMode(e,t,i),addCartParams:{exParams:JSON.stringify(P)},addCartJHSParams:JSON.stringify({action:"add2Cart"}),buyNowParams:{targetUrl:y,serviceId:c,tgKey:x.tgKey||"",bookingDate:x.bookingDate||"",entranceDate:x.entranceDate||"",exParams:JSON.stringify(x)},buyNowWithJHSParams:JSON.stringify({action:"toBuy"}),buyNowWithCouponParams:m,cartWithCouponParams:f,replenishParams:{sellerId:getSellerId(e)},hasPVImage:ye(e,t)?"true":"false",findSimilarParams:{findSimilarUrl:"http://h5.m.taobao.com/tusou/image_editor/index.html?picurl="+encodeURIComponent(B)+"&pvids="+encodeURIComponent(me(t))},isvCustom:z,extraRequest:V,customRight:{targetUrl:D},utBizParams:L,supportSilentAction:N}}(e.originalData,e.storedData,e.extInput)}var K={},G="",r=function(e,t){return"id_biz_bottom"},Y=function(e,t){var i=[];isEmpty(e.skuCore)||isEmpty(e.skuCore.skuBuy)||isEmpty(e.skuCore.skuBuy.buyPattern)||isEmpty(e.skuCore.skuBuy.buyPattern.type)||(i=e.skuCore.skuBuy.buyPattern.type);for(var r=0,s=(i=isEmpty(e.skuCore)||isEmpty(e.skuCore.skuBuy)||isEmpty(e.skuCore.skuBuy.skuPattern)||isEmpty(e.skuCore.skuBuy.skuPattern.type)?i:e.skuCore.skuBuy.skuPattern.type).length;r<s;r++){var a=i[r];if(t.id_biz_buy_method.method===a.bizId)return a}return{}},j=function(e,t){e=Y(e,t);return!(isEmpty(e)||!isTrue(e.hideInstallment))},Z=function(e,t){var i=[];if(!isEmpty(t.id_biz_service)){if(!isEmpty(t.id_biz_service.fixedServiceUnique)){var r,s=t.id_biz_service.fixedServiceUnique;for(r in s)i.push(r+"|"+s[r])}if(!isEmpty(t.id_biz_service.checkedServiceUnique)){var a,o=t.id_biz_service.checkedServiceUnique;for(a in o)i.push(a+"|"+o[a])}}var n="";return i.forEach(function(e,t){n+="-"+e}),-1<n.indexOf("-")?n.substring(1):n},Q=function(e,t){return!hasSku(e,t)||"0"!==t.id_biz_property.skuId&&0<parseInt(t.id_biz_quantity.quantity.currentNum)},s=function(e,t){return!(isEmpty(t.id_biz_service)||isEmpty(t.id_biz_service.fixedServiceUnique)&&isEmpty(t.id_biz_service.checkedServiceUnique))},X=function(e,t){return!!isEmpty(e.services)||!isTrue(e.services.mustSelect)||s(e,t)},$=function(e,t){if(!isEmpty(t.id_biz_component||isEmpty(t.id_biz_component.checkedComponent))){var i,r=t.id_biz_component.checkedComponent;for(i in r)if(!isEmpty(r[i])&&!isTrue(r[i].hasSelected))return r[i].currentElementTips}return""},ee=function(e,t){var i={isComplete:!0,guidanceMsg:""};if(!isEmpty(e.skuCore)&&!isEmpty(e.skuCore.sku2info)){var r=t.id_biz_property.skuId,e=e.skuCore.sku2info[r];if(!isEmpty(e)){var s=e.eachSkuProms;if(!isEmpty(s))for(var a=0,o=s.length;a<o;a++){var n=s[a];if(isTrue(n.mustSelect))try{var u=t.id_biz_normal_select.skuIdMap2SelectItems[r][n.groupId],p=u.candidateSelectItems,c=u.fixedSelectItems,m=u.checkedSelectItems;if(isEmpty(c)){if(isEmpty(m))return i.isComplete=!1,i.guidanceMsg=n.title,i;for(var l=0,d=m.length;l<d;l++)for(var y=m[l],f=0,k=p.length;f<k;f++)if(p[f].eachId===y){if(isTrue(p[f].isComplete))break;return i.isComplete=!1,i.guidanceMsg=n.title+" : "+p[f].name,i}}else for(var E=0,v=p.length;E<v;E++)if(p[E].eachId===c[0]){if(isTrue(p[E].isComplete))break;return i.isComplete=!1,i.guidanceMsg=n.title+" : "+p[E].name,i}}catch(e){return i.isComplete=!1,i.guidanceMsg=n.title,i}}}}return i},te=function(e,t){if(!isEmpty(t.id_biz_component||isEmpty(t.id_biz_component.checkedComponent))){var i,r=t.id_biz_component.checkedComponent;for(i in r)if(!isEmpty(r[i])&&!isTrue(r[i].hasSelected))return!1}return!0},ie=function(e,t){return!!isEmpty(t.id_biz_store||isEmpty(t.id_biz_store.checkedStoreInfo))||isEmpty(t.id_biz_store.checkedStoreInfo.tradeTip)},re=function(e,t){return!!isEmpty(t.id_biz_custom_service||isEmpty(t.id_biz_custom_service.checkedServiceUnique))||isEmpty(t.id_biz_custom_service.checkedServiceUnique.checkTips)},a=function(e,t){return!!isEmpty(t.id_biz_buy_method.method)||"normal"===t.id_biz_buy_method.method},se=function(e,t){if(!a(e,t)){e=Y(e,t);if(!isEmpty(e)&&"xyhf"!==e.bizId)return e.buyUrl}return""},ae=function(e,t){var i={};return isEmpty(e.seller)||(i.sellerId=e.seller.userId),isEmpty(e.skuCore)||isEmpty(e.skuCore.sku2info)||(e=e.skuCore.sku2info[t.id_biz_property.skuId],isEmpty(e))||(i.asac=e.asac||"",i.itemApplyParams=e.itemApplyParams||""),i},oe=function(e,t){var i={};if(isEmpty(e.seller)||(i.sellerId=e.seller.userId),!isEmpty(e.skuCore)&&!isEmpty(e.skuCore.sku2info)){e=e.skuCore.sku2info[t.id_biz_property.skuId];if(!isEmpty(e)){i.asac=e.asac||"",i.itemApplyParams=e.itemApplyParams||"";e=e.multiNumInfo,t=t.id_biz_quantity.quantity;if(!isEmpty(t)&&!isEmpty(e)){var r=Object.keys(e),s=parseInt(t.currentNum);if(!isEmpty(s)&&!isEmpty(r)){for(var a=0,o=!1,n=0;n<r.length;n++){var u=parseInt(r[n]);u&&u<=s&&(a<u&&(a=u),o=!0)}o&&(t=e[String(a)],isEmpty(t)||(i.asac=t.asac||"",i.itemApplyParams=t.itemApplyParams||""))}}}}return i},ne=function(e,t){var i=c(t,"addCart");return isEmpty(i)?(t=Y(e,t),isEmpty(t)||isEmpty(t.cartBtnText)?isEmpty(e.trade)||isEmpty(e.trade.cartText)?"":e.trade.cartText:t.cartBtnText):i},ue=function(e,t){var i=c(t,"buyNow");if(!isEmpty(i))return i;i=Y(e,t);if(!isEmpty(i)&&!isEmpty(i.okBtnText))return i.okBtnText;if(!isEmpty(e.skuCore)&&!isEmpty(e.skuCore.sku2info)){i=e.skuCore.sku2info[t.id_biz_property.skuId];if(!isEmpty(i)&&!isEmpty(i.buyText))return i.buyText}return isEmpty(e.trade)||isEmpty(e.trade.buyText)?"":e.trade.buyText},d=function(e,t){var i={};if(!isEmpty(t.id_biz_component)){var r=t.id_biz_component.checkedComponent;if(!isEmpty(r))for(var s in r){var a=r[s];if(!isEmpty(a)&&!isEmpty(a.params))for(var o in a.params)i[o]=a.params[o]}}return i},y=function(e,t){var a={},i=t.id_biz_property.skuId,r=t.id_biz_normal_select.skuIdMap2SelectItems[i];if(!isEmpty(r))for(var o in r){var s=r[o];if(!isEmpty(s)){var n=s.candidateSelectItems,u=s.fixedSelectItems,s=s.checkedSelectItems;if(isEmpty(u))isEmpty(s)||s.forEach(function(e,t){for(var i=0,r=n.length;i<r;i++)if(n[i].eachId===e){var s=[];s.push({eachId:n[i].eachId,params:n[i].params}),a[o]=s;break}});else for(var p=0,c=n.length;p<c;p++)if(n[p].eachId===u[0]){var m=[];m.push({eachId:n[p].eachId,params:n[p].params}),a[o]=m;break}}}return a},f=function(e,t){if(!isEmpty(t.id_biz_store)){t=t.id_biz_store.checkedStoreInfo.tradeParams;if(!isEmpty(t))return t}return{}},pe=function(e,t){var i={};for(r in t.transparent_map)i[r]=t.transparent_map[r];if(!isEmpty(e.trade)&&!isEmpty(e.trade.cartParam))for(var r in e.trade.cartParam)i[r]=e.trade.cartParam[r];if(!isEmpty(e.skuCore)&&!isEmpty(e.skuCore.sku2info)){var s=e.skuCore.sku2info[t.id_biz_property.skuId];if(!isEmpty(s)&&!isEmpty(s.cartParam))for(var r in s.cartParam)i[r]=s.cartParam[r]}var a=y(e,t),o=(isEmpty(a)||(i.normal_select=a),Y(e,t));if(!isEmpty(o)&&!isEmpty(o.addCartsParams)&&isTrue(e.skuCore.skuBuy.buyPattern.cartEnableBuyPattern))for(var r in o.addCartsParams)i[r]=o.addCartsParams[r];var n=d(e,t);for(u in n)i[u]=n[u];var u,p=f(e,t);for(u in p)i[u]=p[u];return i},ce=function(e,t){var i={};for(r in t.transparent_map)i[r]=t.transparent_map[r];if(!isEmpty(e.trade)&&!isEmpty(e.trade.buyParam)){for(var r in e.trade.buyParam)i[r]=e.trade.buyParam[r];isEmpty(e.delivery)||isEmpty(e.delivery.addressId)||(i.addressId=e.delivery.addressId)}if(!isEmpty(e.skuCore)&&!isEmpty(e.skuCore.sku2info)){var s=e.skuCore.sku2info[t.id_biz_property.skuId];if(!isEmpty(s)&&!isEmpty(s.buyParam))for(var r in s.buyParam)i[r]=s.buyParam[r]}var a=y(e,t),o=(isEmpty(a)||(i.normal_select=a),d(e,t));for(n in o)i[n]=o[n];var n,u=f(e,t);for(n in u)i[n]=u[n];var p=Y(e,t);if(!isEmpty(p)&&!isEmpty(p.buyParams))if(isString(p.buyParams))try{var c,m=JSON.parse(p.buyParams);for(c in m)i[c]=m[c]}catch(e){}else for(var l in p.buyParams)i[l]=p.buyParams[l];return i},o=function(e){return!(!isEmpty(e)&&!isEmpty(e.feature)&&isTrue(e.feature.closefindsimilar))},n=function(e){return!(isEmpty(e)||isEmpty(e.feature)||!isTrue(e.feature.buhuo))},me=function(e){var t=e.id_biz_property.checkedPropValue;if(isEmpty(t))return"";var i,r=[];for(i in t)r.push(i+":"+t[i]);return ascSortAndAppendPVIdList(r)},u=function(e,t){var i=t.id_biz_property.checkedPropValue;if(isEmpty(i))return!1;if(isEmpty(t.outOfStockDescartesMap))return!1;var r,s=[];for(r in i)s.push(r+":"+i[r]);var a=ascSortAndAppendPVIdList(s);return!isEmpty(a)&&!0===t.outOfStockDescartesMap[a]},p=function(e,t){for(var i in t)for(var r=i,s=t[i],a=0,o=e.skuBase.props.length;a<o;a++){var n=e.skuBase.props[a];if(!isEmpty(n)&&r===n.pid&&!isEmpty(n.values))for(var u=0,p=n.values.length;u<p;u++){var c=n.values[u];if(!isEmpty(c)&&s===c.vid&&!isEmpty(c.image))return c.image}}return""},ye=function(e,t){t=t.id_biz_property.checkedPropValue;if(!isEmpty(t)&&!isEmpty(e.skuBase)&&!isEmpty(e.skuBase.props)){e=p(e,t);if(!isEmpty(e))return!0}return!1},le=function(e,t){var i="",t=(isEmpty(e.item)||isEmpty(e.item.images)||(i=e.item.images[0]),t.id_biz_property.checkedPropValue);return isEmpty(t)||isEmpty(e.skuBase)||isEmpty(e.skuBase.props)||(e=p(e,t),isEmpty(e))||(i=e),i=isEmpty(i)||"http"===i.substr(0,4)?i:"http:"+i},fe=function(e,t,i){var r,s,i=getBottomBarMode(e,t,i),a=!(isEmpty(e.skuCore)||isEmpty(e.skuCore.skuItem)||isEmpty(e.skuCore.skuItem.storeInfo)||isEmpty(e.skuCore.skuItem.storeInfo.bottomBarText)||isEmpty(e.skuCore.skuItem.storeInfo.bottomBarUrl));return hasSku(e,t)&&(r=o(e),"0"!==t.id_biz_property.skuId?(s=n(e),"REPLENISH"===(i=!(isEmpty(e.skuCore)||isEmpty(e.skuCore.sku2info)||isEmpty(e.skuCore.sku2info[t.id_biz_property.skuId]))&&0<parseInt(e.skuCore.sku2info[t.id_biz_property.skuId].quantity)?i:a?"FIND_NEW_STORE":s?"REPLENISH":"REPLENISH_NOCLICK")&&r?i="REPLENISH_AND_FINDSIMILAR":"REPLENISH_NOCLICK"===i&&r&&(i="FINDSIMILAR")):u(e,t)&&r&&(i="FINDSIMILAR",a)&&(i="FIND_NEW_STORE")),i},de=function(e,t){return isEmpty(e.id_biz_custom_service.checkedServiceUnique.select)?null:"addCart"===t?e.id_biz_custom_service.checkedServiceUnique.select.cartActionUrl:"buyNow"===t?e.id_biz_custom_service.checkedServiceUnique.select.buyActionUrl:null},c=function(e,t){return isEmpty(e.id_biz_custom_service.checkedServiceUnique.select)?null:"addCart"===t?e.id_biz_custom_service.checkedServiceUnique.select.cartBtnText:"buyNow"===t?e.id_biz_custom_service.checkedServiceUnique.select.buyBtnText:null};return function(){return{initContext:e,getComponentId:r,saveStoredData:t,getDisplayData:i}}}()],__targetSpecialBizsStoredData__=[],__targetSpecialBizs__=[];