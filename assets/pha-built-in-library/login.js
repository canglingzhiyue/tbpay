!function(a,b,c){function d(a){var b=new RegExp("(?:^|;\\s*)"+a+"\\=([^;]+)(?:;\\s*|$)").exec(v.cookie);return b?b[1]:c}function e(a){return a.preventDefault(),!1}function f(b,c){var d=this,f=a.dpr||1,g=document.createElement("div"),h=document.documentElement.getBoundingClientRect();Math.max(h.width,window.innerWidth)/f,Math.max(h.height,window.innerHeight)/f;g.style.cssText=["-webkit-transform:scale("+f+") translateZ(0)","-ms-transform:scale("+f+") translateZ(0)","transform:scale("+f+") translateZ(0)","-webkit-transform-origin:0 0","-ms-transform-origin:0 0","transform-origin:0 0","z-index:999999","position:absolute","left:0","top:0","right:0","bottom:0","background:#FFF","display:none"].join(";");var i=document.createElement("div");i.style.cssText=["width:100%","height:52px","background:#EEE","line-height:52px","text-align:left","box-sizing:border-box","padding-left:20px","position:absolute","left:0","top:0","font-size:16px","font-weight:bold","color:#333"].join(";"),i.innerText=b;var j=document.createElement("a");j.style.cssText=["display:block","position:absolute","right:0","top:0","height:52px","line-height:52px","padding:0 20px","color:#999"].join(";"),j.innerText="鍏抽棴";var k=document.createElement("iframe");k.style.cssText=["width:100%","height:"+window.innerHeight/f+"px","border:0","overflow:hidden"].join(";"),i.appendChild(j),g.appendChild(i),g.appendChild(k),v.body.appendChild(g),k.src=c,j.addEventListener("click",function(){d.hide();var a=v.createEvent("HTMLEvents");a.initEvent("close",!1,!1),g.dispatchEvent(a)},!1),this.addEventListener=function(){g.addEventListener.apply(g,arguments)},this.removeEventListener=function(){g.removeEventListener.apply(g,arguments)},this.show=function(){document.addEventListener("touchmove",e,!1),g.style.display="block",window.scrollTo(0,0)},this.hide=function(){document.removeEventListener("touchmove",e),window.scrollTo(0,-h.top),v.body.removeChild(g)}}function g(a){if(!a||"function"!=typeof a||!b.mtop){var d=this.getUserNick();return!!d}b.mtop.request({api:"mtop.user.getUserSimple",v:"1.0",data:{},ecode:1,sessionOption:"AutoLoginOnly",jsonpIncPrefix:z},function(d){d.retType===b.mtop.RESPONSE_TYPE.SUCCESS?a(!0,d):d.retType===b.mtop.RESPONSE_TYPE.SESSION_EXPIRED?a(!1,d):a(c,d)})}function h(a){var b;return u&&(b={},b.promise=new u(function(a,c){b.resolve=a,b.reject=c})),this.isLogin(function(c,d){a&&a(c,d),c===!0?b&&b.resolve(d):b&&b.reject(d)}),b?b.promise:void 0}function i(a){if(!a||"function"!=typeof a){var b="",e=d("_w_tb_nick"),f=d("_nk_")||d("snk"),g=d("sn");return e&&e.length>0&&"null"!=e?b=decodeURIComponent(e):f&&f.length>0&&"null"!=f?b=unescape(unescape(f).replace(/\\u/g,"%u")):g&&g.length>0&&"null"!=g&&(b=decodeURIComponent(g)),b=b.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")}this.isLogin(function(b,d){a(b===!0&&d&&d.data&&d.data.nick?d.data.nick:b===!1?"":c)})}function j(a){var b;return u&&(b={},b.promise=new u(function(a,c){b.resolve=a,b.reject=c})),this.getUserNick(function(c){a&&a(c),c?b&&b.resolve(c):b&&b.reject()}),b?b.promise:void 0}function k(a,c){var d="//"+F+"."+G.subDomain+"."+D+"/"+G[(a||"login")+"Name"];if(c){var e=[];for(var f in c)e.push(f+"="+encodeURIComponent(c[f]));d+="?"+e.join("&")}var g=b.login.config.loginUrlParams;if(g){var h=[];for(var i in g)h.push(i+"="+encodeURIComponent(g[i]));d+=/\?/.test(d)?"&"+h.join("&"):"?"+e.join("&")}return d}function l(a,b){b?location.replace(a):location.href=a}function m(b,c,d){function e(b){j.removeEventListener("close",e),a.removeEventListener("message",g),d("CANCEL")}function g(b){var c=b.data||{};c&&c.type&&"child"===c.type&&(c.content.indexOf("SUCCESS")>-1?(j.removeEventListener("close",e),a.removeEventListener("message",g),j.hide(),d("SUCCESS")):d("FAILURE"))}var h=location.protocol+"//h5."+G.subDomain+".taobao.com/"+("waptest"===G.subDomain?"src":"other")+"/"+b+"end.html?origin="+encodeURIComponent(location.protocol+"//"+location.hostname),i=k(b,{ttid:"h5@iframe",redirectURL:h}),j=new f(c.title||"鎮ㄩ渶瑕佺櫥褰曟墠鑳界户缁闂�",i);j.addEventListener("close",e,!1),a.addEventListener("message",g,!1),j.show()}function n(b,c,d){a.WindVane.call("aluWVJSBridge","sdkLogin",c,function(){d("SUCCESS")},function(a){if(a&&a.ret&&a.ret.indexOf("HY_")>-1){var e=k(b,{redirectURL:c.redirectUrl||location.href});l(e,c.replace)}else d("CANCEL")})}function o(a,b,c){if("function"==typeof b?(c=b,b=null):"string"==typeof b?b={redirectUrl:b}:"object"==typeof b&&b.url&&(b.redirectUrl=b.url),b=b||{},c&&y&&b.forceNative)n(a,b,c);else if(c&&!y&&"login"===a)m(a,b,c);else{var d=k(a,{redirectURL:b.redirectUrl||location.href});l(d,b.replace)}}function p(a,b,c){var d;return u&&(d={},d.promise=new u(function(a,b){d.resolve=a,d.reject=b})),o(a,b,function(a){c&&c(a),"SUCCESS"===a?d&&d.resolve(a):d&&d.reject(a)}),d?d.promise:void 0}function q(a){o("login",a)}function r(a,c){return"boolean"==typeof a&&(c=a,a=null),void 0===c&&(c=b.login.config.forceNative),p("login",{forceNative:c},a)}function s(a){o("logout",a)}function t(a,b){return"boolean"==typeof a&&(b=a,a=null),p("logout",{forceNative:b},a)}var u=a.Promise,v=a.document,w=a.navigator.userAgent,x=location.hostname,y=(a.location.search,w.match(/AliApp\(([^\/]+)\/([\d\.\_]+)\)/i)),z="liblogin",A=["taobao.net","taobao.com"],B=new RegExp("([^.]*?)\\.?((?:"+A.join(")|(?:").replace(/\./g,"\\.")+"))","i"),C=x.match(B)||[],D=function(){var a=C[2]||"taobao.com";return a.match(/\.?taobao\.net$/)?"taobao.net":"taobao.com"}(),E=function(){var a=D,b=C[1]||"m";return"taobao.net"===a&&(b="waptest"),"m"!=b&&"wapa"!=b&&"waptest"!=b&&(b="m"),b}(),F="login";b.login=b.login||{};var G={loginName:"login.htm",logoutName:"logout.htm",subDomain:E,forceNative:!0};b.login.config=G,b.login.isLogin=g,b.login.isLoginAsync=h,b.login.getUserNick=i,b.login.getUserNickAsync=j,b.login.generateUrl=k,b.login.goLogin=q,b.login.goLoginAsync=r,b.login.goLogout=s,b.login.goLogoutAsync=t}(window,window.lib||(window.lib={}));